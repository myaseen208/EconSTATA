[
["introduction.html", "Econometrics using STATA 1 Introduction 1.1 An Overview of STATA’s Distictive Features", " Econometrics using STATA Muhammad Yaseen 1 Introduction 1.1 An Overview of STATA’s Distictive Features You can easily learn STATA commands, even if you do not know the syntex You can use STATA’s do-file Editor to save time developing you analysis A simple command performs all computations for all the desired obervations Looping over variables saves time &amp; effort STATA’s by-groups reduce the need for programming STATA has many statistical features that make it uniquely powerful You can avoid problems by keeping STATA up to date STATA is infinitely extensible STATA’s user community provides a wealth of useful additions to STATA STATA is cross-platform compatible STATA can be fun "],
["working-with-economic-and-financial-data-in-stata.html", "2 Working with Economic and Financial Data in STATA 2.1 The Basics", " 2 Working with Economic and Financial Data in STATA 2.1 The Basics 2.1.1 The use Command . use census2c.(1980 Census data for NE and NC states) . list, sep(0) +---------------------------------------------------------------------+ | state region pop popurb medage marr divr | |---------------------------------------------------------------------| 1. | Connecticut NE 3107.6 2449.8 32.00 26.0 13.5 | 2. | Illinois N Cntrl 11426.5 9518.0 29.90 109.8 51.0 | 3. | Indiana N Cntrl 5490.2 3525.3 29.20 57.9 40.0 | 4. | Iowa N Cntrl 2913.8 1708.2 30.00 27.5 11.9 | 5. | Kansas N Cntrl 2363.7 1575.9 30.10 24.8 13.4 | 6. | Maine NE 1124.7 534.1 30.40 12.0 6.2 | 7. | Massachusetts NE 5737.0 4808.3 31.20 46.3 17.9 | 8. | Michigan N Cntrl 9262.1 6551.6 28.80 86.9 45.0 | 9. | Minnesota N Cntrl 4076.0 2725.2 29.20 37.6 15.4 | 10. | Missouri N Cntrl 4916.7 3349.6 30.90 54.6 27.6 | 11. | Nebraska N Cntrl 1569.8 987.9 29.70 14.2 6.4 | 12. | New Hampshire NE 920.6 480.3 30.10 9.3 5.3 | 13. | New Jersey NE 7364.8 6557.4 32.20 55.8 27.8 | 14. | New York NE 17558.1 14858.1 31.90 144.5 62.0 | 15. | N. Dakota N Cntrl 652.7 318.3 28.30 6.1 2.1 | 16. | Ohio N Cntrl 10797.6 7918.3 29.90 99.8 58.8 | 17. | Pennsylvania NE 11863.9 8220.9 32.10 93.7 34.9 | 18. | Rhode Island NE 947.2 824.0 31.80 7.5 3.6 | 19. | S. Dakota N Cntrl 690.8 320.8 28.90 8.8 2.8 | 20. | Vermont NE 511.5 172.7 29.40 5.2 2.6 | 21. | Wisconsin N Cntrl 4705.8 3020.7 29.40 41.1 17.5 | +---------------------------------------------------------------------+ 2.1.2 Variable Types . use census2c.(1980 Census data for NE and NC states) . describe Contains data from census2c.dta obs: 21 1980 Census data for NE and NC states vars: 7 14 Jun 2006 08:48 size: 1,050 ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- state str13 %-13s State region byte %-8.0g cenreg Census region pop double %8.1f 1980 Population, &#39;000 popurb double %8.1f 1980 Urban population, &#39;000 medage float %9.2f Median age, years marr double %8.1f Marriages, &#39;000 divr double %8.1f Divorces, &#39;000 ------------------------------------------------------------------------------- Sorted by: 2.1.3 Generate &amp; Replace . use census2c.(1980 Census data for NE and NC states) . generate urbanized = popurb/pop . summarize urbanized Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- urbanized | 21 .6667691 .1500842 .3377319 .8903645 . use census2c.(1980 Census data for NE and NC states) . generate urbanized = popurb/pop . replace urbanized = 100*urbanized (21 real changes made) . summarize urbanized Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- urbanized | 21 66.67691 15.00843 33.77319 89.03645 2.1.4 sort &amp; gsort . use census2c.(1980 Census data for NE and NC states) . list region state pop, sepby(region) +-----------------------------------+ | region state pop | |-----------------------------------| 1. | NE Connecticut 3107.6 | |-----------------------------------| 2. | N Cntrl Illinois 11426.5 | 3. | N Cntrl Indiana 5490.2 | 4. | N Cntrl Iowa 2913.8 | 5. | N Cntrl Kansas 2363.7 | |-----------------------------------| 6. | NE Maine 1124.7 | 7. | NE Massachusetts 5737.0 | |-----------------------------------| 8. | N Cntrl Michigan 9262.1 | 9. | N Cntrl Minnesota 4076.0 | 10. | N Cntrl Missouri 4916.7 | 11. | N Cntrl Nebraska 1569.8 | |-----------------------------------| 12. | NE New Hampshire 920.6 | 13. | NE New Jersey 7364.8 | 14. | NE New York 17558.1 | |-----------------------------------| 15. | N Cntrl N. Dakota 652.7 | 16. | N Cntrl Ohio 10797.6 | |-----------------------------------| 17. | NE Pennsylvania 11863.9 | 18. | NE Rhode Island 947.2 | |-----------------------------------| 19. | N Cntrl S. Dakota 690.8 | |-----------------------------------| 20. | NE Vermont 511.5 | |-----------------------------------| 21. | N Cntrl Wisconsin 4705.8 | +-----------------------------------+ . . sort region -pop . list region state pop, sepby(region) +-----------------------------------+ | region state pop | |-----------------------------------| 1. | NE Vermont 511.5 | 2. | NE New Hampshire 920.6 | 3. | NE Rhode Island 947.2 | 4. | NE Maine 1124.7 | 5. | NE Connecticut 3107.6 | 6. | NE Massachusetts 5737.0 | 7. | NE New Jersey 7364.8 | 8. | NE Pennsylvania 11863.9 | 9. | NE New York 17558.1 | |-----------------------------------| 10. | N Cntrl N. Dakota 652.7 | 11. | N Cntrl S. Dakota 690.8 | 12. | N Cntrl Nebraska 1569.8 | 13. | N Cntrl Kansas 2363.7 | 14. | N Cntrl Iowa 2913.8 | 15. | N Cntrl Minnesota 4076.0 | 16. | N Cntrl Wisconsin 4705.8 | 17. | N Cntrl Missouri 4916.7 | 18. | N Cntrl Indiana 5490.2 | 19. | N Cntrl Michigan 9262.1 | 20. | N Cntrl Ohio 10797.6 | 21. | N Cntrl Illinois 11426.5 | +-----------------------------------+ . . gsort region -pop . list region state pop, sepby(region) +-----------------------------------+ | region state pop | |-----------------------------------| 1. | NE New York 17558.1 | 2. | NE Pennsylvania 11863.9 | 3. | NE New Jersey 7364.8 | 4. | NE Massachusetts 5737.0 | 5. | NE Connecticut 3107.6 | 6. | NE Maine 1124.7 | 7. | NE Rhode Island 947.2 | 8. | NE New Hampshire 920.6 | 9. | NE Vermont 511.5 | |-----------------------------------| 10. | N Cntrl Illinois 11426.5 | 11. | N Cntrl Ohio 10797.6 | 12. | N Cntrl Michigan 9262.1 | 13. | N Cntrl Indiana 5490.2 | 14. | N Cntrl Missouri 4916.7 | 15. | N Cntrl Wisconsin 4705.8 | 16. | N Cntrl Minnesota 4076.0 | 17. | N Cntrl Iowa 2913.8 | 18. | N Cntrl Kansas 2363.7 | 19. | N Cntrl Nebraska 1569.8 | 20. | N Cntrl S. Dakota 690.8 | 21. | N Cntrl N. Dakota 652.7 | +-----------------------------------+ "],
["organizing-handling-economic-data.html", "3 Organizing &amp; Handling Economic Data 3.1 Cross-Sectional Data &amp; Identifier Variables 3.2 Time Series Data 3.3 Pooled Cross-Sectional Time Series Data 3.4 Panel Data 3.5 Tools for Manipulating Panel Data 3.6 Combining Cross-Sectional &amp; Time Series Datasets 3.7 Creating Long-Format Datasets with Append 3.8 The reshape Command 3.9 Using STATA for Reproducible Research", " 3 Organizing &amp; Handling Economic Data 3.1 Cross-Sectional Data &amp; Identifier Variables 3.2 Time Series Data 3.3 Pooled Cross-Sectional Time Series Data 3.4 Panel Data 3.5 Tools for Manipulating Panel Data 3.6 Combining Cross-Sectional &amp; Time Series Datasets 3.7 Creating Long-Format Datasets with Append 3.8 The reshape Command 3.9 Using STATA for Reproducible Research 3.9.1 Using do-files 3.9.2 Data Validation: Assert &amp; Duplicates "],
["linear-regression.html", "4 Linear Regression 4.1 Linear Regression 4.2 Information Criteria 4.3 The Coefficient Estimates &amp; Beta Coefficients 4.4 Recovering Estimation Results 4.5 Detecting Collinearlity in Regression 4.6 Presenting Regression Estimates 4.7 Hypothesis Tests, Linear Restrictions, &amp; Constrained Least Squares 4.8 Computing Residuals &amp; Predicted Values 4.9 Computing Marginal Effects", " 4 Linear Regression 4.1 Linear Regression . use hprice2a.(Housing price data for Boston-area communities) . summarize price lprice lnox ldist rooms stratio, sep(0) Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- price | 506 22511.51 9208.856 5000 50001 lprice | 506 9.941057 .409255 8.517193 10.8198 lnox | 506 1.693091 .2014102 1.348073 2.164472 ldist | 506 1.188233 .539501 .1222176 2.495682 rooms | 506 6.284051 .7025938 3.56 8.78 stratio | 506 18.45929 2.16582 12.6 22 . use hprice2a.(Housing price data for Boston-area communities) . regress lprice lnox ldist rooms stratio Source | SS df MS Number of obs = 506 -------------+---------------------------------- F(4, 501) = 175.86 Model | 49.3987735 4 12.3496934 Prob &gt; F = 0.0000 Residual | 35.1834974 501 .070226542 R-squared = 0.5840 -------------+---------------------------------- Adj R-squared = 0.5807 Total | 84.5822709 505 .167489645 Root MSE = .265 ------------------------------------------------------------------------------ lprice | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- lnox | -.95354 .1167418 -8.17 0.000 -1.182904 -.7241762 ldist | -.1343401 .0431032 -3.12 0.002 -.2190255 -.0496548 rooms | .2545271 .0185303 13.74 0.000 .2181203 .2909338 stratio | -.0524512 .0058971 -8.89 0.000 -.0640373 -.0408651 _cons | 11.08387 .3181115 34.84 0.000 10.45887 11.70886 ------------------------------------------------------------------------------ 4.2 Information Criteria . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . estat ic Akaike&#39;s information criterion and Bayesian information criterion ----------------------------------------------------------------------------- Model | Obs ll(null) ll(model) df AIC BIC -------------+--------------------------------------------------------------- . | 506 -265.4135 -43.49514 5 96.99028 118.123 ----------------------------------------------------------------------------- Note: N=Obs used in calculating BIC; see [R] BIC note. 4.3 The Coefficient Estimates &amp; Beta Coefficients . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . regress, beta Source | SS df MS Number of obs = 506 -------------+---------------------------------- F(4, 501) = 175.86 Model | 49.3987735 4 12.3496934 Prob &gt; F = 0.0000 Residual | 35.1834974 501 .070226542 R-squared = 0.5840 -------------+---------------------------------- Adj R-squared = 0.5807 Total | 84.5822709 505 .167489645 Root MSE = .265 ------------------------------------------------------------------------------ lprice | Coef. Std. Err. t P&gt;|t| Beta -------------+---------------------------------------------------------------- lnox | -.95354 .1167418 -8.17 0.000 -.4692738 ldist | -.1343401 .0431032 -3.12 0.002 -.1770941 rooms | .2545271 .0185303 13.74 0.000 .4369626 stratio | -.0524512 .0058971 -8.89 0.000 -.2775771 _cons | 11.08387 .3181115 34.84 0.000 . ------------------------------------------------------------------------------ 4.4 Recovering Estimation Results . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . ereturn list scalars: e(N) = 506 e(df_m) = 4 e(df_r) = 501 e(F) = 175.8550695227946 e(r2) = .5840322442976398 e(rmse) = .2650029089298266 e(mss) = 49.39877352102587 e(rss) = 35.18349741237627 e(r2_a) = .5807111444517128 e(ll) = -43.4951392092929 e(ll_0) = -265.4134648194153 e(rank) = 5 macros: e(cmdline) : &quot;regress lprice lnox ldist rooms stratio&quot; e(title) : &quot;Linear regression&quot; e(marginsok) : &quot;XB default&quot; e(vce) : &quot;ols&quot; e(depvar) : &quot;lprice&quot; e(cmd) : &quot;regress&quot; e(properties) : &quot;b V&quot; e(predict) : &quot;regres_p&quot; e(model) : &quot;ols&quot; e(estat_cmd) : &quot;regress_estat&quot; matrices: e(b) : 1 x 5 e(V) : 5 x 5 functions: e(sample) . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . matrix list e(b) e(b)[1,5] lnox ldist rooms stratio _cons y1 -.95354002 -.13434015 .25452706 -.05245119 11.083865 . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . estat vce Covariance matrix of coefficients of regress model e(V) | lnox ldist rooms stratio _cons -------------+------------------------------------------------------------ lnox | .01362865 ldist | .00426247 .00185789 rooms | .00035279 .00003043 .00034337 stratio | 9.740e-07 .00002182 .00003374 .00003478 _cons | -.03037429 -.01001835 -.00341397 -.00088151 .10119496 4.5 Detecting Collinearlity in Regression . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . estat vif Variable | VIF 1/VIF -------------+---------------------- lnox | 3.98 0.251533 ldist | 3.89 0.257162 rooms | 1.22 0.820417 stratio | 1.17 0.852488 -------------+---------------------- Mean VIF | 2.56 4.6 Presenting Regression Estimates . use hprice2a.(Housing price data for Boston-area communities) . generate rooms2 = rooms^2 . . quietly regress lprice rooms . estimates store model1 . . quietly regress lprice rooms rooms2 ldist . estimates store model2 . . quietly regress lprice ldist stratio lnox . estimates store model3 . . quietly regress lprice lnox ldist rooms stratio . estimates store model4 . . estimates table model1 model2 model3 model4, stat(r2_a, rmse) b(%7.3g) se(%6. &gt; 3g) p(%4.3f) ------------------------------------------------------ Variable | model1 model2 model3 model4 -------------+---------------------------------------- rooms | .369 -.821 .255 | .0201 .183 .0185 | 0.000 0.000 0.000 rooms2 | .0889 | .014 | 0.000 ldist | .237 -.157 -.134 | .0255 .0505 .0431 | 0.000 0.002 0.002 stratio | -.0775 -.0525 | .0066 .0059 | 0.000 0.000 lnox | -1.22 -.954 | .135 .117 | 0.000 0.000 _cons | 7.62 11.3 13.6 11.1 | .127 .584 .304 .318 | 0.000 0.000 0.000 0.000 -------------+---------------------------------------- r2_a | .399 .5 .424 .581 rmse | .317 .289 .311 .265 ------------------------------------------------------ legend: b/se/p . use hprice2a.(Housing price data for Boston-area communities) . generate rooms2 = rooms^2 . . quietly regress lprice rooms . estimates store model1 . . quietly regress lprice rooms rooms2 ldist . estimates store model2 . . quietly regress lprice ldist stratio lnox . estimates store model3 . . quietly regress lprice lnox ldist rooms stratio . estimates store model4 . . estimates table model1 model2 model3 model4, stat(r2_a rmse ll) b(%7.3g) star &gt; title(&quot;Models of Median Housing Price&quot;) Models of Median Housing Price ------------------------------------------------------------------ Variable | model1 model2 model3 model4 -------------+---------------------------------------------------- rooms | .369*** -.821*** .255*** rooms2 | .0889*** ldist | .237*** -.157** -.134** stratio | -.0775*** -.0525*** lnox | -1.22*** -.954*** _cons | 7.62*** 11.3*** 13.6*** 11.1*** -------------+---------------------------------------------------- r2_a | .399 .5 .424 .581 rmse | .317 .289 .311 .265 ll | -136 -88.6 -124 -43.5 ------------------------------------------------------------------ legend: * p&lt;0.05; ** p&lt;0.01; *** p&lt;0.001 4.7 Hypothesis Tests, Linear Restrictions, &amp; Constrained Least Squares 4.7.1 Wald Tests with Test . use hprice2a.(Housing price data for Boston-area communities) . regress lprice lnox ldist rooms stratio Source | SS df MS Number of obs = 506 -------------+---------------------------------- F(4, 501) = 175.86 Model | 49.3987735 4 12.3496934 Prob &gt; F = 0.0000 Residual | 35.1834974 501 .070226542 R-squared = 0.5840 -------------+---------------------------------- Adj R-squared = 0.5807 Total | 84.5822709 505 .167489645 Root MSE = .265 ------------------------------------------------------------------------------ lprice | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- lnox | -.95354 .1167418 -8.17 0.000 -1.182904 -.7241762 ldist | -.1343401 .0431032 -3.12 0.002 -.2190255 -.0496548 rooms | .2545271 .0185303 13.74 0.000 .2181203 .2909338 stratio | -.0524512 .0058971 -8.89 0.000 -.0640373 -.0408651 _cons | 11.08387 .3181115 34.84 0.000 10.45887 11.70886 ------------------------------------------------------------------------------ . test rooms ( 1) rooms = 0 F( 1, 501) = 188.67 Prob &gt; F = 0.0000 . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . test rooms = 0.33 ( 1) rooms = .33 F( 1, 501) = 16.59 Prob &gt; F = 0.0001 4.7.2 Wald Tests involving Linear Combinations of Parameters . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . lincom rooms + ldist + stratio ( 1) ldist + rooms + stratio = 0 ------------------------------------------------------------------------------ lprice | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- (1) | .0677357 .0490714 1.38 0.168 -.0286753 .1641468 ------------------------------------------------------------------------------ . test ldist = stratio ( 1) ldist - stratio = 0 F( 1, 501) = 3.63 Prob &gt; F = 0.0574 . test lnox = 10*stratio ( 1) lnox - 10*stratio = 0 F( 1, 501) = 10.77 Prob &gt; F = 0.0011 . use hprice2a.(Housing price data for Boston-area communities) . constraint def 1 rooms + ldist + stratio = 0 . cnsreg lprice lnox ldist rooms stratio, constraint(1) Constrained linear regression Number of obs = 506 F( 3, 502) = 233.42 Prob &gt; F = 0.0000 Root MSE = 0.2652 ( 1) ldist + rooms + stratio = 0 ------------------------------------------------------------------------------ lprice | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- lnox | -1.083392 .0691935 -15.66 0.000 -1.219337 -.9474478 ldist | -.1880712 .0185284 -10.15 0.000 -.2244739 -.1516684 rooms | .2430633 .01658 14.66 0.000 .2104886 .2756381 stratio | -.0549922 .0056075 -9.81 0.000 -.0660092 -.0439752 _cons | 11.48651 .1270377 90.42 0.000 11.23691 11.7361 ------------------------------------------------------------------------------ 4.7.3 Joint Hypothesis Tests . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . test lnox ldist ( 1) lnox = 0 ( 2) ldist = 0 F( 2, 501) = 58.95 Prob &gt; F = 0.0000 . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . test (lnox = 10*stratio) (ldist = stratio) ( 1) lnox - 10*stratio = 0 ( 2) ldist - stratio = 0 F( 2, 501) = 5.94 Prob &gt; F = 0.0028 4.7.4 Testing Nonlinear Restrictions &amp; Forming Nonlinear Combinations . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . testnl _b[lnox] * _b[stratio] = 0.06 (1) _b[lnox] * _b[stratio] = 0.06 chi2(1) = 1.44 Prob &gt; chi2 = 0.2300 . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . testnl (_b[lnox] * _b[stratio] = 0.06) (_b[rooms] * _b[ldist] = 3 * _b[lnox]) &gt; (1) _b[lnox] * _b[stratio] = 0.06 (2) _b[rooms] * _b[ldist] = 3 * _b[lnox] chi2(2) = 184.94 Prob &gt; chi2 = 0.0000 4.7.5 Testing Competing (Non-Nested) Models . use hprice2a.(Housing price data for Boston-area communities) . nnest lprice lnox ldist rooms stratio (crime proptax ldist rooms stratio) command nnest is unrecognized r(199); end of do-file r(199); 4.8 Computing Residuals &amp; Predicted Values . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . predict double lpricehat, xb . label var lpricehat &quot;Predicted log price&quot; . twoway (scatter lpricehat lprice, msize(small) mcolor(black) msize(tiny)) || &gt; (line lprice lprice if lprice &lt;., clwidth(thin)), ytitle(&quot;Predicted log media &gt; n housing price&quot;) xtitle(&quot;Actual log median housing price&quot;) aspectratio(1) le &gt; gend(off) Actual versus predicted values from regression model 4.8.1 Computing Interval Predictions . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox if _n &lt;= 100 . predict double xb if e(sample) (option xb assumed; fitted values) (406 missing values generated) . predict double stdpred if e(sample), stdp (406 missing values generated) . scalar tval = invttail(e(df_r), 0.975) . generate double uplim = xb + tval * stdpred (406 missing values generated) . generate double lowlim = xb - tval * stdpred (406 missing values generated) . . summarize lnox if e(sample), meanonly . generate lnoxbar = r(mean) . . label var xb &quot;Pred&quot; . label var uplim &quot;95% prediction interval&quot; . label var lowlim &quot;95% prediction interval&quot; . . twoway (scatter lprice lnox if e(sample), sort ms(Oh) xline(`lnoxbar&#39;)) (conn &gt; ected xb lnox if e(sample), sort msize(small)) (rline uplim lowlim lnox if e( &gt; sample), sort), ytitle(Actual and predicted log price) legend(cols(3)) . Point and interval predictions from bivariate regression 4.9 Computing Marginal Effects . use hprice2a.(Housing price data for Boston-area communities) . regress price nox dist rooms stratio proptax Source | SS df MS Number of obs = 506 -------------+---------------------------------- F(5, 500) = 165.85 Model | 2.6717e+10 5 5.3434e+09 Prob &gt; F = 0.0000 Residual | 1.6109e+10 500 32217368.7 R-squared = 0.6239 -------------+---------------------------------- Adj R-squared = 0.6201 Total | 4.2826e+10 505 84803032 Root MSE = 5676 ------------------------------------------------------------------------------ price | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- nox | -2570.162 407.371 -6.31 0.000 -3370.532 -1769.793 dist | -955.7175 190.7124 -5.01 0.000 -1330.414 -581.021 rooms | 6828.264 399.7034 17.08 0.000 6042.959 7613.569 stratio | -1127.534 140.7653 -8.01 0.000 -1404.099 -850.9699 proptax | -52.24272 22.53714 -2.32 0.021 -96.52188 -7.963555 _cons | 20440.08 5290.616 3.86 0.000 10045.5 30834.66 ------------------------------------------------------------------------------ . mfx, eyex Elasticities after regress y = Fitted values (predict) = 22511.51 ------------------------------------------------------------------------------ variable | ey/ex Std. Err. z P&gt;|z| [ 95% C.I. ] X ---------+-------------------------------------------------------------------- nox | -.6336244 .10068 -6.29 0.000 -.830954 -.436295 5.54978 dist | -.1611472 .03221 -5.00 0.000 -.224273 -.098022 3.79575 rooms | 1.906099 .1136 16.78 0.000 1.68344 2.12876 6.28405 stratio | -.9245706 .11589 -7.98 0.000 -1.15171 -.697429 18.4593 proptax | -.0947401 .04088 -2.32 0.020 -.174871 -.014609 40.8237 ------------------------------------------------------------------------------ "],
["specifying-the-functional-form.html", "5 Specifying the Functional Form 5.1 Introduction 5.2 Specification Error 5.3 Endogeneity &amp; Measurement Error", " 5 Specifying the Functional Form 5.1 Introduction 5.2 Specification Error 5.2.1 Omitting relevant Variables from the Model 5.2.2 Graphically Analyzing Regression data . use hprice2a.(Housing price data for Boston-area communities) . graph matrix lprice lnox ldist rooms stratio, ms(Oh) msize(tiny) graph matrix of regression variables 5.2.3 Added-Variable Plots . use hprice2a.(Housing price data for Boston-area communities) . generate rooms2 = rooms^2 . regress lprice lnox ldist rooms rooms2 stratio lproptax Source | SS df MS Number of obs = 506 -------------+---------------------------------- F(6, 499) = 138.41 Model | 52.8357813 6 8.80596356 Prob &gt; F = 0.0000 Residual | 31.7464896 499 .06362022 R-squared = 0.6247 -------------+---------------------------------- Adj R-squared = 0.6202 Total | 84.5822709 505 .167489645 Root MSE = .25223 ------------------------------------------------------------------------------ lprice | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- lnox | -.6615694 .1201606 -5.51 0.000 -.8976524 -.4254864 ldist | -.095087 .0421435 -2.26 0.024 -.1778875 -.0122864 rooms | -.5625662 .1610315 -3.49 0.001 -.8789496 -.2461829 rooms2 | .0634347 .0124621 5.09 0.000 .0389501 .0879193 stratio | -.0362928 .0060699 -5.98 0.000 -.0482185 -.0243671 lproptax | -.2211125 .0410202 -5.39 0.000 -.301706 -.1405189 _cons | 14.15454 .5693846 24.86 0.000 13.03585 15.27323 ------------------------------------------------------------------------------ . avplots, ms(Oh) msize(small) col(2) Added-variable plots 5.2.4 Including Irrelevant Variables in the Model 5.2.5 The Asymmetry of Specification Error 5.2.6 Misspecification of the Functional Form 5.2.7 Ramsey’s RESET . use hprice2a.(Housing price data for Boston-area communities) . quietly regress lprice lnox ldist rooms stratio . estat ovtest Ramsey RESET test using powers of the fitted values of lprice Ho: model has no omitted variables F(3, 498) = 9.69 Prob &gt; F = 0.0000 . estat ovtest, rhs Ramsey RESET test using powers of the independent variables Ho: model has no omitted variables F(12, 489) = 11.79 Prob &gt; F = 0.0000 . use hprice2a.(Housing price data for Boston-area communities) . generate rooms2 = rooms^2 . regress lprice lnox ldist rooms rooms2 stratio lproptax Source | SS df MS Number of obs = 506 -------------+---------------------------------- F(6, 499) = 138.41 Model | 52.8357813 6 8.80596356 Prob &gt; F = 0.0000 Residual | 31.7464896 499 .06362022 R-squared = 0.6247 -------------+---------------------------------- Adj R-squared = 0.6202 Total | 84.5822709 505 .167489645 Root MSE = .25223 ------------------------------------------------------------------------------ lprice | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- lnox | -.6615694 .1201606 -5.51 0.000 -.8976524 -.4254864 ldist | -.095087 .0421435 -2.26 0.024 -.1778875 -.0122864 rooms | -.5625662 .1610315 -3.49 0.001 -.8789496 -.2461829 rooms2 | .0634347 .0124621 5.09 0.000 .0389501 .0879193 stratio | -.0362928 .0060699 -5.98 0.000 -.0482185 -.0243671 lproptax | -.2211125 .0410202 -5.39 0.000 -.301706 -.1405189 _cons | 14.15454 .5693846 24.86 0.000 13.03585 15.27323 ------------------------------------------------------------------------------ . estat ovtest Ramsey RESET test using powers of the fitted values of lprice Ho: model has no omitted variables F(3, 496) = 1.64 Prob &gt; F = 0.1798 5.2.8 Specification Plots . use hprice2a.(Housing price data for Boston-area communities) . generate rooms2 = rooms^2 . quietly regress lprice lnox ldist rooms rooms2 stratio lproptax . rvpplot ldist, ms(Oh) yline(0) Residual-versus-predictor plot 5.2.9 Specification &amp; Interaction Terms . use hprice2a.(Housing price data for Boston-area communities) . generate taxschl = lproptax * stratio . regress lprice lnox ldist lproptax stratio taxschl Source | SS df MS Number of obs = 506 -------------+---------------------------------- F(5, 500) = 84.47 Model | 38.7301562 5 7.74603123 Prob &gt; F = 0.0000 Residual | 45.8521148 500 .09170423 R-squared = 0.4579 -------------+---------------------------------- Adj R-squared = 0.4525 Total | 84.5822709 505 .167489645 Root MSE = .30283 ------------------------------------------------------------------------------ lprice | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- lnox | -.9041103 .1441253 -6.27 0.000 -1.187276 -.6209444 ldist | -.1430541 .0501831 -2.85 0.005 -.2416499 -.0444583 lproptax | -1.48103 .5163117 -2.87 0.004 -2.495438 -.4666219 stratio | -.4388722 .1538321 -2.85 0.005 -.7411093 -.1366351 taxschl | .0641648 .026406 2.43 0.015 .0122843 .1160452 _cons | 21.47905 2.952307 7.28 0.000 15.6786 27.27951 ------------------------------------------------------------------------------ 5.2.10 Outlier Statistics &amp; Measures of Leverage . use hprice2a.(Housing price data for Boston-area communities) . generate rooms2 = rooms^2 . quietly regress lprice lnox ldist rooms rooms2 stratio lproptax . generate town = _n . predict double lev if e(sample), leverage . predict double eps if e(sample), res . generate eps2 = eps^2 . summarize price lprice Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- price | 506 22511.51 9208.856 5000 50001 lprice | 506 9.941057 .409255 8.517193 10.8198 . gsort -lev . list town price lprice lev eps2 in 1/5 +------------------------------------------------+ | town price lprice lev eps2 | |------------------------------------------------| 1. | 366 27499 10.2219 .17039262 .6181372 | 2. | 368 23100 10.04759 .11272637 .3002205 | 3. | 365 21900 9.994242 .10947853 .3308896 | 4. | 258 50001 10.8198 .08036068 .0604706 | 5. | 226 50001 10.8198 .0799096 .0338277 | +------------------------------------------------+ . gsort -eps2 . list town price lprice lev eps2 in 1/5 +------------------------------------------------+ | town price lprice lev eps2 | |------------------------------------------------| 1. | 369 50001 10.8198 .02250047 1.71812 | 2. | 373 50001 10.8198 .01609848 1.489409 | 3. | 372 50001 10.8198 .02056901 1.242105 | 4. | 370 50001 10.8198 .0172083 1.022456 | 5. | 406 5000 8.517193 .00854955 1.006366 | +------------------------------------------------+ . predict double dfits if e(sample), dfits . gsort -dfits . quietly generate cutoff = abs(dfits) &gt; 2 * sqrt((e(df_m) +1 )/e(N)) &amp; e(sampl &gt; e) . list town price lprice dfits if cutoff +--------------------------------------+ | town price lprice dfits | |--------------------------------------| 1. | 366 27499 10.2219 1.5679033 | 2. | 368 23100 10.04759 .82559867 | 3. | 369 50001 10.8198 .8196735 | 4. | 372 50001 10.8198 .65967704 | 5. | 373 50001 10.8198 .63873964 | |--------------------------------------| 6. | 371 50001 10.8198 .55639311 | 7. | 370 50001 10.8198 .54354054 | 8. | 361 24999 10.12659 .32184327 | 9. | 359 22700 10.03012 .31516743 | 10. | 408 27901 10.23642 .31281326 | |--------------------------------------| 11. | 367 21900 9.994242 .31060611 | 12. | 360 22600 10.02571 .28892457 | 13. | 363 20800 9.942708 .27393758 | 14. | 358 21700 9.985067 .24312885 | 490. | 386 7200 8.881836 -.23838749 | |--------------------------------------| 491. | 388 7400 8.909235 -.25909393 | 492. | 491 8100 8.999619 -.26584795 | 493. | 400 6300 8.748305 -.28782824 | 494. | 416 7200 8.881836 -.29288953 | 495. | 402 7200 8.881836 -.29595696 | |--------------------------------------| 496. | 381 10400 9.249561 -.29668364 | 497. | 258 50001 10.8198 -.30053391 | 498. | 385 8800 9.082507 -.302916 | 499. | 420 8400 9.035987 -.30843965 | 500. | 490 7000 8.853665 -.3142718 | |--------------------------------------| 501. | 401 5600 8.630522 -.33273658 | 502. | 417 7500 8.922658 -.34950136 | 503. | 399 5000 8.517193 -.36618139 | 504. | 406 5000 8.517193 -.37661853 | 505. | 415 7012 8.855378 -.43879798 | |--------------------------------------| 506. | 365 21900 9.994242 -.85150064 | +--------------------------------------+ . . dfbeta lnox _dfbeta_1: dfbeta(lnox) . quietly generate dfcut = abs(_dfbeta_1) &gt; 2 * sqrt(e(N)) &amp; e(sample) . sort _dfbeta_1 . summarize lnox Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- lnox | 506 1.693091 .2014102 1.348073 2.164472 . list town price lprice lnox _dfbeta_1 +------------------------------------------------+ | town price lprice lnox _dfbeta_1 | |------------------------------------------------| 1. | 369 50001 10.8198 1.842136 -.4316933 | 2. | 372 50001 10.8198 1.842136 -.4257791 | 3. | 373 50001 10.8198 1.899118 -.3631822 | 4. | 371 50001 10.8198 1.842136 -.2938702 | 5. | 370 50001 10.8198 1.842136 -.2841335 | |------------------------------------------------| 6. | 365 21900 9.994242 1.971299 -.2107066 | 7. | 408 27901 10.23642 1.885553 -.1728729 | 8. | 368 23100 10.04759 1.842136 -.1309522 | 9. | 11 15000 9.615806 1.656321 -.1172723 | 10. | 410 27499 10.2219 1.786747 -.1117743 | |------------------------------------------------| 11. | 413 17900 9.792556 1.786747 -.0959273 | 12. | 437 9600 9.169518 2.00148 -.0955826 | 13. | 146 13800 9.532424 2.164472 -.0914387 | 14. | 438 8700 9.071078 2.00148 -.0856147 | 15. | 420 8400 9.035987 1.971299 -.085223 | |------------------------------------------------| 16. | 145 11800 9.375854 2.164472 -.0816827 | 17. | 439 8400 9.035987 2.00148 -.070508 | 18. | 182 36199 10.49679 1.585145 -.0668001 | 19. | 423 20800 9.942708 1.814825 -.064928 | 20. | 157 13100 9.480368 2.164472 -.0622912 | |------------------------------------------------| 21. | 258 50001 10.8198 1.867176 -.0570776 | 22. | 158 41299 10.62859 1.800058 -.0563827 | 23. | 409 17200 9.752665 1.786747 -.0549674 | 24. | 343 16500 9.711116 1.644805 -.0542086 | 25. | 414 16300 9.69892 1.786747 -.0522002 | |------------------------------------------------| 26. | 143 13400 9.50301 2.164472 -.0499795 | 27. | 446 11800 9.375854 2.00148 -.0498875 | 28. | 31 12700 9.449357 1.682688 -.0480591 | 29. | 156 15600 9.655026 2.164472 -.0474292 | 30. | 493 20100 9.908475 1.806648 -.0472557 | |------------------------------------------------| 31. | 480 21400 9.971147 1.814825 -.0469688 | 32. | 481 23001 10.04329 1.671473 -.0465269 | 33. | 451 13400 9.50301 1.964311 -.0461007 | 34. | 9 16500 9.711116 1.656321 -.0449441 | 35. | 33 13200 9.487972 1.682688 -.0427313 | |------------------------------------------------| 36. | 28 14800 9.602383 1.682688 -.0383155 | 37. | 32 14500 9.581903 1.682688 -.0374429 | 38. | 188 32000 10.37349 1.474763 -.0370926 | 39. | 435 11700 9.367344 1.964311 -.0370922 | 40. | 454 17794 9.786616 1.964311 -.0369095 | |------------------------------------------------| 41. | 436 13400 9.50301 2.00148 -.0368249 | 42. | 35 13500 9.510445 1.682688 -.036522 | 43. | 161 27000 10.20359 1.800058 -.035759 | 44. | 441 10500 9.25913 2.00148 -.0354014 | 45. | 26 13900 9.539644 1.682688 -.0336016 | |------------------------------------------------| 46. | 445 10800 9.287301 2.00148 -.0330708 | 47. | 10 18900 9.846917 1.656321 -.0328998 | 48. | 101 27499 10.2219 1.648659 -.0317264 | 49. | 189 29801 10.3023 1.474763 -.0315825 | 50. | 12 18900 9.846917 1.656321 -.0311876 | |------------------------------------------------| 51. | 472 19600 9.883285 1.671473 -.0303079 | 52. | 200 34899 10.46021 1.393766 -.0302973 | 53. | 34 13100 9.480368 1.682688 -.0300799 | 54. | 470 20100 9.908475 1.757858 -.0299316 | 55. | 482 23699 10.07319 1.671473 -.0295599 | |------------------------------------------------| 56. | 162 50001 10.8198 1.800058 -.0294572 | 57. | 263 48801 10.79551 1.867176 -.0288593 | 58. | 23 15200 9.62905 1.682688 -.0284555 | 59. | 468 19100 9.857444 1.764731 -.0278265 | 60. | 448 12600 9.441452 2.00148 -.027274 | |------------------------------------------------| 61. | 450 13000 9.472705 1.964311 -.0268602 | 62. | 24 14500 9.581903 1.682688 -.0267329 | 63. | 506 11900 9.384294 1.745715 -.0259339 | 64. | 75 24101 10.09001 1.474763 -.0255723 | 65. | 159 24299 10.09819 1.800058 -.0253549 | |------------------------------------------------| 66. | 191 37001 10.5187 1.474763 -.0246281 | 67. | 106 19500 9.87817 1.648659 -.0242416 | 68. | 292 37298 10.5267 1.413423 -.0242084 | 69. | 107 19500 9.87817 1.648659 -.0240593 | 70. | 484 21800 9.989665 1.671473 -.0238902 | |------------------------------------------------| 71. | 21 13600 9.517825 1.682688 -.0234366 | 72. | 230 31499 10.35771 1.617406 -.0231037 | 73. | 102 26500 10.1849 1.648659 -.0219822 | 74. | 62 16000 9.680344 1.510722 -.0219783 | 75. | 489 15200 9.62905 1.806648 -.0218215 | |------------------------------------------------| 76. | 25 15600 9.655026 1.682688 -.0215176 | 77. | 127 15700 9.661416 1.83098 -.0211289 | 78. | 430 9500 9.159047 1.915451 -.0207799 | 79. | 455 14900 9.609117 1.964311 -.0206806 | 80. | 108 20400 9.92329 1.648659 -.020656 | |------------------------------------------------| 81. | 173 23100 10.04759 1.629241 -.020537 | 82. | 215 23699 10.07319 1.587192 -.0205038 | 83. | 275 32400 10.38591 1.497388 -.0203821 | 84. | 184 32500 10.389 1.585145 -.019082 | 85. | 185 26399 10.18108 1.585145 -.0189528 | |------------------------------------------------| 86. | 190 34899 10.46021 1.474763 -.0188717 | 87. | 456 14100 9.55393 1.964311 -.0187349 | 88. | 483 24999 10.12659 1.671473 -.0186684 | 89. | 473 23200 10.05191 1.757858 -.0183966 | 90. | 224 30101 10.31231 1.623341 -.0176759 | |------------------------------------------------| 91. | 233 41702 10.6383 1.623341 -.0173393 | 92. | 180 37201 10.52409 1.585145 -.0173209 | 93. | 417 7500 8.922658 1.915451 -.0171022 | 94. | 375 13800 9.532424 1.899118 -.0166074 | 95. | 316 16200 9.692766 1.693779 -.0165045 | |------------------------------------------------| 96. | 279 29100 10.27849 1.497388 -.0162037 | 97. | 119 20400 9.92329 1.699279 -.0161968 | 98. | 176 29401 10.28878 1.629241 -.0161278 | 99. | 29 18400 9.820106 1.682688 -.0157718 | 100. | 374 13800 9.532424 1.899118 -.0145677 | |------------------------------------------------| 101. | 183 37900 10.54271 1.585145 -.0144407 | 102. | 40 30801 10.3353 1.453953 -.014429 | 103. | 495 24499 10.10639 1.766442 -.0138828 | 104. | 264 30999 10.34171 1.867176 -.013838 | 105. | 105 20100 9.908475 1.648659 -.013284 | |------------------------------------------------| 106. | 457 12700 9.449357 1.964311 -.0129107 | 107. | 341 18700 9.836279 1.638997 -.0129061 | 108. | 193 36399 10.5023 1.474763 -.0128875 | 109. | 96 28399 10.25411 1.492904 -.0127983 | 110. | 201 32899 10.4012 1.393766 -.0126864 | |------------------------------------------------| 111. | 192 30501 10.32551 1.474763 -.0125861 | 112. | 257 43998 10.6919 1.371181 -.0124312 | 113. | 276 32000 10.37349 1.497388 -.0120773 | 114. | 186 29599 10.2955 1.585145 -.0116235 | 115. | 338 18500 9.825526 1.638997 -.0116081 | |------------------------------------------------| 116. | 494 21800 9.989665 1.766442 -.0114905 | 117. | 166 24999 10.12659 1.800058 -.0114317 | 118. | 99 43800 10.68739 1.492904 -.0108364 | 119. | 41 34899 10.46021 1.453953 -.0108243 | 120. | 471 19900 9.898475 1.757858 -.0104401 | |------------------------------------------------| 121. | 278 33100 10.40729 1.497388 -.0101313 | 122. | 94 24999 10.12659 1.534714 -.0101088 | 123. | 111 21700 9.985067 1.699279 -.01002 | 124. | 317 17800 9.786954 1.693779 -.0099336 | 125. | 434 14300 9.568015 1.964311 -.0098488 | |------------------------------------------------| 126. | 340 19000 9.852194 1.638997 -.0097685 | 127. | 117 21200 9.961757 1.699279 -.0093754 | 128. | 346 17500 9.769957 1.48614 -.0091785 | 129. | 469 17052 9.744022 1.757858 -.0091705 | 130. | 452 15200 9.62905 1.964311 -.0091184 | |------------------------------------------------| 131. | 231 24299 10.09819 1.617406 -.0090826 | 132. | 268 50001 10.8198 1.7492 -.008913 | 133. | 179 29900 10.30561 1.629241 -.0087004 | 134. | 280 35102 10.46601 1.4884 -.0086304 | 135. | 68 22000 9.998797 1.408545 -.0085998 | |------------------------------------------------| 136. | 347 17200 9.752665 1.48614 -.0085918 | 137. | 53 22620 10.02659 1.479329 -.0084467 | 138. | 429 11000 9.305651 1.915451 -.0083504 | 139. | 150 15400 9.642123 2.164472 -.0080456 | 140. | 349 24499 10.10639 1.470176 -.0077041 | |------------------------------------------------| 141. | 213 22400 10.01682 1.587192 -.0074679 | 142. | 163 50001 10.8198 1.800058 -.0072357 | 143. | 203 42302 10.65259 1.423108 -.0072147 | 144. | 214 28099 10.24349 1.587192 -.0071618 | 145. | 488 20600 9.933046 1.763017 -.0069738 | |------------------------------------------------| 146. | 169 23799 10.0774 1.800058 -.0067039 | 147. | 168 23799 10.0774 1.800058 -.0066772 | 148. | 426 8300 9.024011 1.915451 -.0066314 | 149. | 393 9700 9.179881 1.94591 -.0066296 | 150. | 81 28001 10.24 1.449269 -.0064669 | |------------------------------------------------| 151. | 140 17800 9.786954 1.83098 -.0063847 | 152. | 83 24800 10.1186 1.449269 -.0063639 | 153. | 52 20500 9.92818 1.479329 -.0061827 | 154. | 306 28399 10.25411 1.551809 -.0060002 | 155. | 104 19300 9.867861 1.648659 -.0059841 | |------------------------------------------------| 156. | 51 19700 9.888374 1.479329 -.0058348 | 157. | 236 24000 10.08581 1.623341 -.0057875 | 158. | 499 21200 9.961757 1.766442 -.0056033 | 159. | 1 24000 10.08581 1.682688 -.0055244 | 160. | 254 42800 10.66429 1.460938 -.0054843 | |------------------------------------------------| 161. | 165 22700 10.03012 1.800058 -.0053979 | 162. | 216 24999 10.12659 1.587192 -.0053433 | 163. | 416 7200 8.881836 1.915451 -.0053274 | 164. | 228 31600 10.36091 1.617406 -.0051245 | 165. | 293 27901 10.23642 1.413423 -.0049782 | |------------------------------------------------| 166. | 27 16600 9.717158 1.682688 -.0049226 | 167. | 49 14400 9.574984 1.499623 -.0049053 | 168. | 229 46700 10.7515 1.617406 -.0047393 | 169. | 147 15600 9.655026 2.164472 -.0047173 | 170. | 175 22600 10.02571 1.629241 -.0047105 | |------------------------------------------------| 171. | 128 16200 9.692766 1.83098 -.0045839 | 172. | 312 22099 10.00329 1.693779 -.0044402 | 173. | 122 20300 9.918376 1.759581 -.0044247 | 174. | 235 29001 10.27509 1.623341 -.0042688 | 175. | 274 35200 10.4688 1.534714 -.0042283 | |------------------------------------------------| 176. | 73 22800 10.03452 1.418277 -.0041709 | 177. | 206 22600 10.02571 1.587192 -.004164 | 178. | 125 18800 9.841612 1.759581 -.0037207 | 179. | 2 21599 9.980402 1.545433 -.0036146 | 180. | 396 13100 9.480368 1.93586 -.0034284 | |------------------------------------------------| 181. | 50 19400 9.873029 1.499623 -.0033576 | 182. | 39 24701 10.1146 1.607436 -.0031628 | 183. | 178 24600 10.1105 1.629241 -.0030147 | 184. | 110 19400 9.873029 1.648659 -.0029739 | 185. | 61 18700 9.836279 1.510722 -.0029386 | |------------------------------------------------| 186. | 177 23200 10.05191 1.629241 -.0028818 | 187. | 210 20000 9.903487 1.587192 -.0027495 | 188. | 120 19300 9.867861 1.759581 -.0027346 | 189. | 124 17300 9.758462 1.759581 -.0025984 | 190. | 148 14600 9.588777 2.164472 -.0025087 | |------------------------------------------------| 191. | 123 20500 9.92818 1.759581 -.0022385 | 192. | 245 17600 9.775654 1.460938 -.0022249 | 193. | 167 50001 10.8198 1.800058 -.002166 | 194. | 500 17500 9.769957 1.766442 -.0021589 | 195. | 428 10900 9.296518 1.915451 -.0021474 | |------------------------------------------------| 196. | 196 50001 10.8198 1.439835 -.0021369 | 197. | 248 20500 9.92818 1.460938 -.002122 | 198. | 18 17500 9.769957 1.682688 -.0020629 | 199. | 42 26601 10.1887 1.499623 -.0019077 | 200. | 342 32778 10.39751 1.48614 -.0018963 | |------------------------------------------------| 201. | 48 16600 9.717158 1.499623 -.0018894 | 202. | 60 19600 9.883285 1.510722 -.0018844 | 203. | 226 50001 10.8198 1.617406 -.001832 | 204. | 155 17000 9.740969 2.164472 -.0018229 | 205. | 353 18600 9.830916 1.413423 -.0016996 | |------------------------------------------------| 206. | 137 17400 9.764226 1.83098 -.0016503 | 207. | 394 13800 9.532424 1.93586 -.0016382 | 208. | 333 19400 9.873029 1.477049 -.0016011 | 209. | 211 21700 9.985067 1.587192 -.0015952 | 210. | 223 27499 10.2219 1.623341 -.0015933 | |------------------------------------------------| 211. | 330 22600 10.02571 1.526056 -.0015749 | 212. | 220 23001 10.04329 1.704748 -.0015483 | 213. | 390 11500 9.350102 1.94591 -.0014979 | 214. | 272 25200 10.1346 1.534714 -.0014252 | 215. | 209 24399 10.1023 1.587192 -.0013174 | |------------------------------------------------| 216. | 395 12700 9.449357 1.93586 -.0013078 | 217. | 505 22000 9.998797 1.745715 -.0012906 | 218. | 282 35401 10.47449 1.4884 -.0012697 | 219. | 63 22199 10.0078 1.510722 -.0011577 | 220. | 324 18500 9.825526 1.595339 -.0011329 | |------------------------------------------------| 221. | 348 23100 10.04759 1.456287 -.0011269 | 222. | 74 23400 10.06049 1.418277 -.0010706 | 223. | 142 14400 9.574984 1.83098 -.001046 | 224. | 45 21200 9.961757 1.499623 -.0009506 | 225. | 296 28601 10.2612 1.474763 -.0009321 | |------------------------------------------------| 226. | 129 18000 9.798127 1.83098 -.0008757 | 227. | 246 18500 9.825526 1.460938 -.0008337 | 228. | 309 22800 10.03452 1.693779 -.0007587 | 229. | 118 19200 9.862665 1.699279 -.0005592 | 230. | 112 22800 10.03452 1.699279 -.000556 | |------------------------------------------------| 231. | 303 26399 10.18108 1.465567 -.0005297 | 232. | 335 20700 9.937889 1.638997 -.0004579 | 233. | 80 20300 9.918376 1.474763 -.0003887 | 234. | 208 22501 10.02131 1.587192 -.00029 | 235. | 126 21400 9.971147 1.759581 -.0002649 | |------------------------------------------------| 236. | 504 23899 10.08159 1.745715 -.0001415 | 237. | 397 12500 9.433484 1.93586 -.0001163 | 238. | 477 16700 9.723164 1.814825 -.000081 | 239. | 86 26601 10.1887 1.501853 -.0000522 | 240. | 232 31701 10.3641 1.617406 -.0000151 | |------------------------------------------------| 241. | 310 20300 9.918376 1.693779 .0001054 | 242. | 219 21500 9.975808 1.704748 .0001567 | 243. | 283 46000 10.7364 1.4884 .0001949 | 244. | 449 14100 9.55393 1.964311 .0002028 | 245. | 277 33200 10.41031 1.497388 .0002292 | |------------------------------------------------| 246. | 44 24701 10.1146 1.499623 .0002693 | 247. | 305 36098 10.49399 1.551809 .000271 | 248. | 344 23899 10.08159 1.576915 .0002758 | 249. | 297 27100 10.20729 1.474763 .0003851 | 250. | 84 22900 10.03889 1.449269 .0005833 | |------------------------------------------------| 251. | 212 19300 9.867861 1.587192 .0005905 | 252. | 43 25301 10.1386 1.499623 .0006433 | 253. | 237 25099 10.13058 1.623341 .0006712 | 254. | 37 20000 9.903487 1.607436 .0006828 | 255. | 170 22299 10.0123 1.800058 .0007145 | |------------------------------------------------| 256. | 130 14300 9.568015 1.83098 .0007622 | 257. | 70 20900 9.947504 1.408545 .0008296 | 258. | 207 24399 10.1023 1.587192 .000875 | 259. | 251 24399 10.1023 1.460938 .00088 | 260. | 314 21600 9.980449 1.693779 .0009465 | |------------------------------------------------| 261. | 501 16800 9.729135 1.766442 .0010252 | 262. | 238 31499 10.35771 1.623341 .0010367 | 263. | 71 24200 10.09411 1.418277 .0010956 | 264. | 57 24701 10.1146 1.410987 .0011089 | 265. | 138 17100 9.746834 1.83098 .0011234 | |------------------------------------------------| 266. | 252 24800 10.1186 1.460938 .0011321 | 267. | 503 20600 9.933046 1.745715 .0011443 | 268. | 323 20400 9.92329 1.595339 .0011816 | 269. | 227 37602 10.53481 1.617406 .0013204 | 270. | 30 21000 9.952278 1.682688 .0013535 | |------------------------------------------------| 271. | 56 35401 10.47449 1.393766 .0014627 | 272. | 440 12800 9.4572 2.00148 .0016096 | 273. | 144 15600 9.655026 2.164472 .0016168 | 274. | 313 19400 9.873029 1.693779 .0017158 | 275. | 281 45401 10.72329 1.4884 .0017327 | |------------------------------------------------| 276. | 217 23300 10.05621 1.704748 .0018928 | 277. | 136 18100 9.803667 1.83098 .0019621 | 278. | 15 18200 9.809176 1.682688 .0020112 | 279. | 271 21100 9.957028 1.534714 .0020471 | 280. | 172 19100 9.857444 1.800058 .0023016 | |------------------------------------------------| 281. | 267 30699 10.33199 1.867176 .0023292 | 282. | 113 18800 9.841612 1.699279 .0023302 | 283. | 87 22501 10.02131 1.501853 .0023375 | 284. | 475 13800 9.532424 1.764731 .0023762 | 285. | 352 24101 10.09001 1.413423 .002526 | |------------------------------------------------| 286. | 244 23699 10.07319 1.453953 .0025868 | 287. | 85 23899 10.08159 1.501853 .0026809 | 288. | 72 21700 9.985067 1.418277 .0027141 | 289. | 225 44802 10.71001 1.617406 .0027266 | 290. | 304 33100 10.40729 1.551809 .0027396 | |------------------------------------------------| 291. | 90 28701 10.26469 1.587192 .0029018 | 292. | 403 12100 9.400961 1.93586 .0029982 | 293. | 135 15600 9.655026 1.83098 .0030177 | 294. | 337 19500 9.87817 1.638997 .0030569 | 295. | 384 12300 9.417355 1.94591 .0031938 | |------------------------------------------------| 296. | 38 13668 9.522813 1.607436 .0032047 | 297. | 266 22800 10.03452 1.867176 .0032496 | 298. | 187 50001 10.8198 1.585145 .0033213 | 299. | 291 28501 10.25769 1.413423 .0033408 | 300. | 422 14200 9.560997 1.971299 .0033722 | |------------------------------------------------| 301. | 351 22900 10.03889 1.456287 .0033961 | 302. | 131 19200 9.862665 1.83098 .00347 | 303. | 322 23100 10.04759 1.595339 .003478 | 304. | 249 24499 10.10639 1.460938 .0034818 | 305. | 204 48499 10.7893 1.425515 .0035265 | |------------------------------------------------| 306. | 164 50001 10.8198 1.800058 .0035734 | 307. | 13 21700 9.985067 1.656321 .0036516 | 308. | 474 29801 10.3023 1.814825 .0039417 | 309. | 250 26200 10.17351 1.460938 .0039509 | 310. | 181 39799 10.5916 1.585145 .0041167 | |------------------------------------------------| 311. | 79 21200 9.961757 1.474763 .0041254 | 312. | 498 18300 9.814656 1.766442 .0041364 | 313. | 502 22400 10.01682 1.745715 .0042514 | 314. | 339 20548 9.930519 1.638997 .0043115 | 315. | 234 48301 10.78521 1.623341 .0043629 | |------------------------------------------------| 316. | 308 28201 10.24711 1.551809 .004465 | 317. | 354 30101 10.31231 1.410987 .0044676 | 318. | 321 23799 10.0774 1.595339 .0046011 | 319. | 383 11300 9.332558 1.94591 .0047599 | 320. | 389 10200 9.230143 1.94591 .0047679 | |------------------------------------------------| 321. | 194 31101 10.345 1.388791 .0047706 | 322. | 260 30101 10.31231 1.867176 .0047774 | 323. | 294 23899 10.08159 1.474763 .0049389 | 324. | 222 21700 9.985067 1.623341 .0049435 | 325. | 121 22000 9.998797 1.759581 .0049438 | |------------------------------------------------| 326. | 243 22199 10.0078 1.453953 .0050146 | 327. | 171 17400 9.764226 1.800058 .0053822 | 328. | 315 23799 10.0774 1.693779 .0055875 | 329. | 259 36001 10.4913 1.867176 .0056653 | 330. | 273 24399 10.1023 1.534714 .0056988 | |------------------------------------------------| 331. | 331 19800 9.893437 1.526056 .0057538 | 332. | 109 19800 9.893437 1.648659 .005793 | 333. | 404 8300 9.024011 1.93586 .0060482 | 334. | 319 23100 10.04759 1.693779 .006068 | 335. | 444 15400 9.642123 2.00148 .0062065 | |------------------------------------------------| 336. | 114 18700 9.836279 1.699279 .0064821 | 337. | 47 20000 9.903487 1.499623 .0065764 | 338. | 350 26601 10.1887 1.456287 .0065786 | 339. | 3 34700 10.4545 1.545433 .006829 | 340. | 195 29100 10.27849 1.388791 .0068445 | |------------------------------------------------| 341. | 411 15000 9.615806 1.786747 .0069358 | 342. | 247 24299 10.09819 1.460938 .0069601 | 343. | 497 19700 9.888374 1.766442 .0070464 | 344. | 355 18200 9.809176 1.418277 .0070865 | 345. | 320 21000 9.952278 1.693779 .0070909 | |------------------------------------------------| 346. | 307 33400 10.41631 1.551809 .007096 | 347. | 479 14600 9.588777 1.814825 .0070969 | 348. | 36 18900 9.846917 1.607436 .0071105 | 349. | 261 33799 10.42819 1.867176 .0072586 | 350. | 116 18300 9.814656 1.699279 .0072618 | |------------------------------------------------| 351. | 20 18200 9.809176 1.682688 .0075003 | 352. | 285 32199 10.37969 1.386294 .007564 | 353. | 318 19800 9.893437 1.693779 .0076158 | 354. | 329 19300 9.867861 1.526056 .0076533 | 355. | 64 24999 10.12659 1.510722 .0076632 | |------------------------------------------------| 356. | 46 19300 9.867861 1.499623 .0077691 | 357. | 415 7012 8.855378 1.93586 .007824 | 358. | 419 8800 9.082507 1.915451 .007874 | 359. | 458 13500 9.510445 1.964311 .0080279 | 360. | 205 50001 10.8198 1.425515 .0081019 | |------------------------------------------------| 361. | 447 14900 9.609117 2.00148 .0081669 | 362. | 298 20300 9.918376 1.474763 .0085907 | 363. | 76 21400 9.971147 1.474763 .0091335 | 364. | 82 23899 10.08159 1.449269 .0092037 | 365. | 287 20100 9.908475 1.348073 .0093339 | |------------------------------------------------| 366. | 270 20700 9.937889 1.534714 .0094668 | 367. | 391 15100 9.62245 1.94591 .0096289 | 368. | 387 10500 9.25913 1.94591 .0096712 | 369. | 332 17100 9.746834 1.477049 .009686 | 370. | 461 16400 9.705036 1.964311 .0097336 | |------------------------------------------------| 371. | 103 18600 9.830916 1.648659 .0097767 | 372. | 7 22900 10.03889 1.656321 .0099829 | 373. | 255 21900 9.994242 1.366092 .0101005 | 374. | 239 23699 10.07319 1.453953 .0102395 | 375. | 132 19600 9.883285 1.83098 .0102551 | |------------------------------------------------| 376. | 288 23200 10.05191 1.398717 .0103194 | 377. | 284 50001 10.8198 1.388791 .0103747 | 378. | 487 19100 9.857444 1.763017 .0104986 | 379. | 311 16100 9.686575 1.693779 .0105595 | 380. | 325 24999 10.12659 1.595339 .0105819 | |------------------------------------------------| 381. | 433 16100 9.686575 1.764731 .0107606 | 382. | 256 20900 9.947504 1.366092 .0108386 | 383. | 290 24800 10.1186 1.398717 .0114381 | 384. | 174 23600 10.069 1.629241 .0116044 | 385. | 496 23100 10.04759 1.766442 .0117644 | |------------------------------------------------| 386. | 65 33001 10.40429 1.425515 .0121224 | 387. | 78 20800 9.942708 1.474763 .0121406 | 388. | 265 36501 10.50509 1.867176 .0122671 | 389. | 421 16700 9.723164 1.971299 .0123169 | 390. | 218 28701 10.26469 1.704748 .012537 | |------------------------------------------------| 391. | 54 23400 10.06049 1.479329 .0129076 | 392. | 55 18900 9.846917 1.410987 .0129513 | 393. | 221 26699 10.19238 1.623341 .0129747 | 394. | 327 23001 10.04329 1.595339 .0132197 | 395. | 100 33200 10.41031 1.492904 .01351 | |------------------------------------------------| 396. | 58 32562 10.3909 1.413423 .0140252 | 397. | 202 24101 10.09001 1.423108 .0143737 | 398. | 240 23300 10.05621 1.453953 .0146344 | 399. | 93 22900 10.03889 1.534714 .0146731 | 400. | 88 22199 10.0078 1.501853 .0147033 | |------------------------------------------------| 401. | 328 22199 10.0078 1.595339 .0147417 | 402. | 295 21700 9.985067 1.474763 .0149248 | 403. | 91 22600 10.02571 1.587192 .0149329 | 404. | 418 10400 9.249561 1.915451 .0149713 | 405. | 459 14900 9.609117 1.964311 .0150557 | |------------------------------------------------| 406. | 22 19600 9.883285 1.682688 .0152086 | 407. | 398 8500 9.047821 1.93586 .0153095 | 408. | 269 43499 10.68049 1.7492 .0162008 | 409. | 478 12000 9.392662 1.814825 .0163773 | 410. | 300 29001 10.27509 1.386294 .0168745 | |------------------------------------------------| 411. | 139 13300 9.49552 1.83098 .0171233 | 412. | 89 23600 10.069 1.587192 .0173629 | 413. | 242 20100 9.908475 1.453953 .0176759 | 414. | 289 22299 10.0123 1.398717 .0176951 | 415. | 356 20600 9.933046 1.418277 .0178045 | |------------------------------------------------| 416. | 253 29599 10.2955 1.460938 .0179755 | 417. | 6 28701 10.26469 1.521699 .0180267 | 418. | 405 8500 9.047821 1.93586 .0180952 | 419. | 199 34600 10.45161 1.396245 .0184836 | 420. | 92 22000 9.998797 1.587192 .0186358 | |------------------------------------------------| 421. | 326 24600 10.1105 1.595339 .0192508 | 422. | 134 18400 9.820106 1.83098 .0196824 | 423. | 241 22000 9.998797 1.453953 .0201607 | 424. | 153 15300 9.635608 2.164472 .0202187 | 425. | 4 33400 10.41631 1.521699 .0206138 | |------------------------------------------------| 426. | 424 13400 9.50301 1.814825 .0206475 | 427. | 141 14000 9.546813 1.83098 .0206522 | 428. | 59 23300 10.05621 1.510722 .0209189 | 429. | 385 8800 9.082507 1.94591 .0216851 | 430. | 485 20600 9.933046 1.763017 .0229157 | |------------------------------------------------| 431. | 492 13600 9.517825 1.806648 .0231727 | 432. | 115 18500 9.825526 1.699279 .0234778 | 433. | 19 20200 9.913438 1.682688 .0239359 | 434. | 336 21100 9.957028 1.638997 .0240607 | 435. | 66 23501 10.0648 1.381282 .0240661 | |------------------------------------------------| 436. | 412 17200 9.752665 1.786747 .0244541 | 437. | 133 23001 10.04329 1.83098 .0251679 | 438. | 453 16100 9.686575 1.964311 .0252416 | 439. | 197 33300 10.41331 1.396245 .0256373 | 440. | 334 22199 10.0078 1.638997 .0258975 | |------------------------------------------------| 441. | 388 7400 8.909235 1.94591 .0263166 | 442. | 69 17400 9.764226 1.408545 .0263849 | 443. | 5 36199 10.49679 1.521699 .0266658 | 444. | 95 20600 9.933046 1.534714 .0274035 | 445. | 407 11900 9.384294 1.885553 .0274155 | |------------------------------------------------| 446. | 402 7200 8.881836 1.93586 .0280494 | 447. | 299 22501 10.02131 1.386294 .0307287 | 448. | 98 38700 10.56359 1.492904 .0308795 | 449. | 16 19900 9.898475 1.682688 .0313705 | 450. | 345 31201 10.34821 1.576915 .0318101 | |------------------------------------------------| 451. | 262 43101 10.6713 1.867176 .032273 | 452. | 379 13100 9.480368 1.903599 .0328231 | 453. | 198 30300 10.3189 1.396245 .0330362 | 454. | 486 21200 9.961757 1.763017 .0337355 | 455. | 302 22000 9.998797 1.465567 .0341089 | |------------------------------------------------| 456. | 431 14500 9.581903 1.764731 .0342425 | 457. | 301 24800 10.1186 1.386294 .0343599 | 458. | 77 20000 9.903487 1.474763 .0356156 | 459. | 97 21400 9.971147 1.492904 .0357894 | 460. | 476 13300 9.49552 1.764731 .0361187 | |------------------------------------------------| 461. | 442 17100 9.746834 2.00148 .0364184 | 462. | 14 20400 9.92329 1.682688 .0369498 | 463. | 377 13900 9.539644 1.903599 .0369729 | 464. | 401 5600 8.630522 1.93586 .0383786 | 465. | 367 21900 9.994242 1.971299 .0430825 | |------------------------------------------------| 466. | 8 27100 10.20729 1.656321 .043922 | 467. | 382 10900 9.296518 1.903599 .0451832 | 468. | 378 13300 9.49552 1.903599 .0464509 | 469. | 467 19000 9.852194 1.879465 .0484201 | 470. | 386 7200 8.881836 1.94591 .048621 | |------------------------------------------------| 471. | 376 15000 9.615806 1.903599 .0488837 | 472. | 67 19400 9.873029 1.381282 .0490895 | 473. | 425 11700 9.367344 1.764731 .0514093 | 474. | 462 17700 9.78132 1.964311 .0535513 | 475. | 443 18400 9.820106 2.00148 .0566888 | |------------------------------------------------| 476. | 286 22000 9.998797 1.358409 .0573509 | 477. | 17 23100 10.04759 1.682688 .0589057 | 478. | 400 6300 8.748305 1.93586 .0589789 | 479. | 432 14100 9.55393 1.764731 .0600489 | 480. | 465 21400 9.971147 1.879465 .0677176 | |------------------------------------------------| 481. | 380 10200 9.230143 1.903599 .0691514 | 482. | 364 16800 9.729135 2.04122 .0709101 | 483. | 392 23200 10.05191 1.94591 .0715526 | 484. | 381 10400 9.249561 1.903599 .0725951 | 485. | 149 17794 9.786616 2.164472 .0743867 | |------------------------------------------------| 486. | 466 19900 9.898475 1.879465 .0744588 | 487. | 399 5000 8.517193 1.93586 .0797595 | 488. | 366 27499 10.2219 1.971299 .0797842 | 489. | 357 17794 9.786616 2.04122 .0857706 | 490. | 154 19400 9.873029 2.164472 .0910494 | |------------------------------------------------| 491. | 463 19500 9.87817 1.964311 .0941472 | 492. | 464 20200 9.913438 1.964311 .0974507 | 493. | 427 10200 9.230143 1.764731 .1007114 | 494. | 406 5000 8.517193 1.93586 .1024767 | 495. | 151 21500 9.975808 2.164472 .1047597 | |------------------------------------------------| 496. | 152 19600 9.883285 2.164472 .1120427 | 497. | 460 20000 9.903487 1.964311 .1142668 | 498. | 160 23300 10.05621 2.164472 .1165014 | 499. | 491 8100 8.999619 1.806648 .1222368 | 500. | 362 19900 9.898475 2.04122 .1376445 | |------------------------------------------------| 501. | 363 20800 9.942708 2.04122 .1707894 | 502. | 490 7000 8.853665 1.806648 .1791869 | 503. | 358 21700 9.985067 2.04122 .1827834 | 504. | 360 22600 10.02571 2.04122 .2209745 | 505. | 361 24999 10.12659 2.04122 .2422512 | |------------------------------------------------| 506. | 359 22700 10.03012 2.04122 .2483543 | +------------------------------------------------+ 5.3 Endogeneity &amp; Measurement Error "],
["regression-with-non-iid-errors.html", "6 Regression with non-iid Errors 6.1 The Generalized Linear Regression Model 6.2 Heteroskedasticity in the Error Distribution 6.3 Serial Correlation in the Error Distribution", " 6 Regression with non-iid Errors 6.1 The Generalized Linear Regression Model 6.1.1 Types of Deviations from i.i.d. Errors 6.1.2 The Robust Estimator of VCE . use fertil2.. describe Contains data from fertil2.dta obs: 4,361 vars: 30 2 Dec 2004 00:16 size: 484,071 ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- mnthborn float %9.0g yearborn float %9.0g age float %9.0g electric float %9.0g radio float %9.0g tv float %9.0g bicycle float %9.0g educ float %9.0g ceb float %9.0g agefbrth float %9.0g children float %9.0g knowmeth float %9.0g usemeth float %9.0g monthfm float %9.0g yearfm float %9.0g agefm float %9.0g idlnchld float %9.0g heduc float %9.0g agesq float %9.0g urban float %9.0g urbeduc float %9.0g spirit float %9.0g protest float %9.0g catholic float %9.0g frsthalf float %9.0g educ0 float %9.0g evermarr float %9.0g _est_OLS byte %8.0g esample() from estimates store _est_robust byte %8.0g esample() from estimates store _est_cluster byte %8.0g esample() from estimates store ------------------------------------------------------------------------------- Sorted by: . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- mnthborn | 4,361 6.331346 3.323333 1 12 yearborn | 4,361 60.43362 8.682723 38 73 age | 4,361 27.40518 8.685233 15 49 electric | 4,358 .1402019 .3472363 0 1 radio | 4,359 .7017665 .457535 0 1 -------------+--------------------------------------------------------- tv | 4,359 .0929112 .2903413 0 1 bicycle | 4,358 .2758146 .4469751 0 1 educ | 4,361 5.855996 3.927075 0 20 ceb | 4,361 2.441642 2.406861 0 13 agefbrth | 3,273 19.0113 3.092333 10 38 -------------+--------------------------------------------------------- children | 4,361 2.267828 2.222032 0 13 knowmeth | 4,354 .9632522 .1881636 0 1 usemeth | 4,290 .5776224 .4939956 0 1 monthfm | 2,079 6.270322 3.619943 1 12 yearfm | 2,079 76.91246 7.760183 50 88 -------------+--------------------------------------------------------- agefm | 2,079 20.68639 5.002383 10 46 idlnchld | 4,241 4.615892 2.219303 0 20 heduc | 1,956 5.144683 4.803028 0 20 agesq | 4,361 826.46 526.9232 225 2401 urban | 4,361 .5166246 .4997808 0 1 -------------+--------------------------------------------------------- urbeduc | 4,361 3.469158 4.294228 0 20 spirit | 4,361 .4221509 .493959 0 1 protest | 4,361 .2277001 .4193961 0 1 catholic | 4,361 .1024994 .3033387 0 1 frsthalf | 4,361 .5404724 .4984164 0 1 -------------+--------------------------------------------------------- educ0 | 4,361 .2077505 .4057437 0 1 evermarr | 4,361 .4767255 .4995153 0 1 _est_OLS | 4,361 .7367576 .4404433 0 1 _est_robust | 4,361 .7367576 .4404433 0 1 _est_cluster | 4,361 .7367576 .4404433 0 1 . use fertil2.. regress ceb age agefbrth usemeth Source | SS df MS Number of obs = 3,213 -------------+---------------------------------- F(3, 3209) = 1433.16 Model | 9202.53439 3 3067.51146 Prob &gt; F = 0.0000 Residual | 6868.49331 3,209 2.14038433 R-squared = 0.5726 -------------+---------------------------------- Adj R-squared = 0.5722 Total | 16071.0277 3,212 5.00343328 Root MSE = 1.463 ------------------------------------------------------------------------------ ceb | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- age | .2237368 .003448 64.89 0.000 .2169763 .2304974 agefbrth | -.2606634 .0087954 -29.64 0.000 -.2779085 -.2434184 usemeth | .1873702 .0554298 3.38 0.001 .0786888 .2960516 _cons | 1.358134 .1737828 7.82 0.000 1.017397 1.69887 ------------------------------------------------------------------------------ . estimates store nonRobust . summarize ceb age agefbrth usemeth children if e(sample) Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- ceb | 3,213 3.230003 2.236836 1 13 age | 3,213 29.93931 7.920432 15 49 agefbrth | 3,213 19.00498 3.098121 10 38 usemeth | 3,213 .6791161 .4668889 0 1 children | 3,213 2.999378 2.055579 0 13 . regress ceb age agefbrth usemeth, robust Linear regression Number of obs = 3,213 F(3, 3209) = 874.06 Prob &gt; F = 0.0000 R-squared = 0.5726 Root MSE = 1.463 ------------------------------------------------------------------------------ | Robust ceb | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- age | .2237368 .0046619 47.99 0.000 .2145962 .2328775 agefbrth | -.2606634 .0095616 -27.26 0.000 -.2794109 -.2419159 usemeth | .1873702 .0606446 3.09 0.002 .0684642 .3062762 _cons | 1.358134 .1675624 8.11 0.000 1.029593 1.686674 ------------------------------------------------------------------------------ . estimates store Robust . estimates table nonRobust Robust, b(%9.4f) se(%5.3f) t(%5.2f) p(%4.3f) title( &gt; Estimates of CEB with OLS and Robust Standard Errors) Estimates of CEB with OLS and Robust Standard Errors -------------------------------------- Variable | nonRobust Robust -------------+------------------------ age | 0.2237 0.2237 | 0.003 0.005 | 64.89 47.99 | 0.000 0.000 agefbrth | -0.2607 -0.2607 | 0.009 0.010 | -29.64 -27.26 | 0.000 0.000 usemeth | 0.1874 0.1874 | 0.055 0.061 | 3.38 3.09 | 0.001 0.002 _cons | 1.3581 1.3581 | 0.174 0.168 | 7.82 8.11 | 0.000 0.000 -------------------------------------- legend: b/se/t/p 6.1.3 The Cluster Estimator of VCE . use fertil2.. regress ceb age agefbrth usemeth, cluster(children) Linear regression Number of obs = 3,213 F(3, 13) = 20.91 Prob &gt; F = 0.0000 R-squared = 0.5726 Root MSE = 1.463 (Std. Err. adjusted for 14 clusters in children) ------------------------------------------------------------------------------ | Robust ceb | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- age | .2237368 .0315086 7.10 0.000 .1556665 .2918071 agefbrth | -.2606634 .0354296 -7.36 0.000 -.3372045 -.1841224 usemeth | .1873702 .0943553 1.99 0.069 -.016472 .3912125 _cons | 1.358134 .4248589 3.20 0.007 .4402818 2.275985 ------------------------------------------------------------------------------ 6.1.4 The Newey–West Estimator of VCE . use ukrates.. describe Contains data from ukrates.dta obs: 526 vars: 3 2 Dec 2004 10:43 size: 6,312 ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- rs float %9.0g month float %tm r20 float %9.0g ------------------------------------------------------------------------------- Sorted by: month . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- rs | 526 7.651513 3.553109 1.561667 16.18 month | 526 168.5 151.9874 -94 431 r20 | 526 8.863726 3.224372 3.35 17.18 . quietly regress D.rs LD.r20 . estimates store nonHAC . newey D.rs LD.r20, lag(5) Regression with Newey-West standard errors Number of obs = 524 maximum lag: 5 F( 1, 522) = 36.00 Prob &gt; F = 0.0000 ------------------------------------------------------------------------------ | Newey-West D.rs | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- r20 | LD. | .4882883 .0813867 6.00 0.000 .3284026 .648174 | _cons | .0040183 .0254102 0.16 0.874 -.0459004 .0539371 ------------------------------------------------------------------------------ . estimates store NeweyWest . estimates table nonHAC NeweyWest, b(%9.4f) se(%5.3f) t(%5.2f) p(%4.3f) title( &gt; Estimates of D.rs with OLS and Newey-West Standard Errors) Estimates of D.rs with OLS and Newey-West Standard Errors -------------------------------------- Variable | nonHAC NeweyWest -------------+------------------------ r20 | LD. | 0.4883 0.4883 | 0.067 0.081 | 7.27 6.00 | 0.000 0.000 | _cons | 0.0040 0.0040 | 0.022 0.025 | 0.18 0.16 | 0.858 0.874 -------------------------------------- legend: b/se/t/p 6.1.5 The Generalized Least Squares Estimator 6.2 Heteroskedasticity in the Error Distribution 6.2.1 Heteroskedasticity Related to Scale 6.2.1.1 Testing for Heteroskedasticity Related to Scale . use hprice2a.(Housing price data for Boston-area communities) . regress lprice rooms crime ldist Source | SS df MS Number of obs = 506 -------------+---------------------------------- F(3, 502) = 219.03 Model | 47.9496883 3 15.9832294 Prob &gt; F = 0.0000 Residual | 36.6325827 502 .072973272 R-squared = 0.5669 -------------+---------------------------------- Adj R-squared = 0.5643 Total | 84.5822709 505 .167489645 Root MSE = .27014 ------------------------------------------------------------------------------ lprice | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- rooms | .3072343 .0178231 17.24 0.000 .2722172 .3422514 crime | -.0174486 .001591 -10.97 0.000 -.0205744 -.0143228 ldist | .074858 .0255746 2.93 0.004 .0246115 .1251045 _cons | 7.984449 .1128067 70.78 0.000 7.762817 8.20608 ------------------------------------------------------------------------------ . estat hettest, iid Breusch-Pagan / Cook-Weisberg test for heteroskedasticity Ho: Constant variance Variables: fitted values of lprice chi2(1) = 44.67 Prob &gt; chi2 = 0.0000 . estat hettest rooms crime ldist, iid Breusch-Pagan / Cook-Weisberg test for heteroskedasticity Ho: Constant variance Variables: rooms crime ldist chi2(3) = 80.11 Prob &gt; chi2 = 0.0000 . whitetst command whitetst is unrecognized r(199); end of do-file r(199); 6.2.1.2 Feasible Generalized Least Squares Estimation . use hprice2a.(Housing price data for Boston-area communities) . generate rooms2 = rooms^2 . regress lprice rooms crime ldist [aw=1/rooms2] (sum of wgt is 13.31716591697057) Source | SS df MS Number of obs = 506 -------------+---------------------------------- F(3, 502) = 159.98 Model | 39.6051883 3 13.2017294 Prob &gt; F = 0.0000 Residual | 41.426616 502 .082523139 R-squared = 0.4888 -------------+---------------------------------- Adj R-squared = 0.4857 Total | 81.0318042 505 .160459018 Root MSE = .28727 ------------------------------------------------------------------------------ lprice | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- rooms | .2345368 .0194432 12.06 0.000 .1963367 .272737 crime | -.0175759 .0016248 -10.82 0.000 -.0207682 -.0143837 ldist | .0650916 .027514 2.37 0.018 .0110349 .1191483 _cons | 8.450081 .1172977 72.04 0.000 8.219626 8.680536 ------------------------------------------------------------------------------ 6.2.2 Heteroskedasticity Between Groups of Observations 6.2.2.1 Testing for Heteroskedasticity Between Groups of Observations . use NEdata.. describe Contains data from NEdata.dta obs: 120 vars: 6 24 Oct 2004 13:28 size: 2,640 ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- state long %8.0g state year int %8.0g pop float %9.0g dpi float %9.0g dpipc float %9.0g ldpipc float %9.0g ------------------------------------------------------------------------------- Sorted by: . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- state | 120 3.5 1.714986 1 6 year | 120 1990.5 5.790459 1981 2000 pop | 120 2196276 1931629 515594 6362076 dpi | 120 4.33e+07 4.46e+07 4385134 1.93e+08 dpipc | 120 18.15802 5.662848 8.153382 33.38758 -------------+--------------------------------------------------------- ldpipc | 120 2.848302 .3265395 2.098433 3.508184 . regress dpipc year Source | SS df MS Number of obs = 120 -------------+---------------------------------- F(1, 118) = 440.17 Model | 3009.33617 1 3009.33617 Prob &gt; F = 0.0000 Residual | 806.737449 118 6.83675804 R-squared = 0.7886 -------------+---------------------------------- Adj R-squared = 0.7868 Total | 3816.07362 119 32.0678456 Root MSE = 2.6147 ------------------------------------------------------------------------------ dpipc | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- year | .8684582 .0413941 20.98 0.000 .7864865 .9504298 _cons | -1710.508 82.39534 -20.76 0.000 -1873.673 -1547.343 ------------------------------------------------------------------------------ . predict double eps, residual . robvar eps, by(state) | Summary of Residuals state | Mean Std. Dev. Freq. ------------+------------------------------------ CT | 4.167853 1.3596266 20 MA | 1.618796 .86550138 20 ME | -2.9841056 .93797625 20 NH | .51033312 .61139299 20 RI | -.8927223 .63408722 20 VT | -2.4201543 .71470977 20 ------------+------------------------------------ Total | -6.063e-14 2.6037101 120 W0 = 4.3882072 df(5, 114) Pr &gt; F = 0.00108562 W50 = 3.2989851 df(5, 114) Pr &gt; F = 0.00806751 W10 = 4.2536245 df(5, 114) Pr &gt; F = 0.00139064 6.2.2.2 Feasible Generalized Least Squares Estimation . use NEdata.. regress dpipc year Source | SS df MS Number of obs = 120 -------------+---------------------------------- F(1, 118) = 440.17 Model | 3009.33617 1 3009.33617 Prob &gt; F = 0.0000 Residual | 806.737449 118 6.83675804 R-squared = 0.7886 -------------+---------------------------------- Adj R-squared = 0.7868 Total | 3816.07362 119 32.0678456 Root MSE = 2.6147 ------------------------------------------------------------------------------ dpipc | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- year | .8684582 .0413941 20.98 0.000 .7864865 .9504298 _cons | -1710.508 82.39534 -20.76 0.000 -1873.673 -1547.343 ------------------------------------------------------------------------------ . predict double eps, residual . by state, sort: egen sd_eps = sd(eps) . generate double gw_wt = 1/sd_eps^2 . tabstat sd_eps gw_wt, by(state) Summary statistics: mean by categories of: state state | sd_eps gw_wt -------+-------------------- CT | 1.359627 .5409545 MA | .8655014 1.334948 ME | .9379762 1.136623 NH | .611393 2.675218 RI | .6340872 2.48715 VT | .7147098 1.957675 -------+-------------------- Total | .8538824 1.688761 ---------------------------- . regress dpipc year [aw = gw_wt] (sum of wgt is 202.6513649171444) Source | SS df MS Number of obs = 120 -------------+---------------------------------- F(1, 118) = 698.19 Model | 2845.55409 1 2845.55409 Prob &gt; F = 0.0000 Residual | 480.921278 118 4.07560405 R-squared = 0.8554 -------------+---------------------------------- Adj R-squared = 0.8542 Total | 3326.47537 119 27.9535745 Root MSE = 2.0188 ------------------------------------------------------------------------------ dpipc | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- year | .8444948 .0319602 26.42 0.000 .7812049 .9077847 _cons | -1663.26 63.61705 -26.14 0.000 -1789.239 -1537.281 ------------------------------------------------------------------------------ 6.2.3 Heteroskedasticity in Grouped Data 6.2.3.1 Feasible Generalized Least Squares Estimation . use pubschl.. describe Contains data from pubschl.dta obs: 420 vars: 18 2 Dec 2004 12:36 size: 58,380 ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- observation_n~r float %9.0g dist_cod float %9.0g county str18 %18s district str53 %53s gr_span str8 %8s enrl_tot float %9.0g teachers float %9.0g calw_pct float %9.0g meal_pct float %9.0g computer float %9.0g testscr float %9.0g comp_stu float %9.0g expn_stu float %9.0g str float %9.0g avginc float %9.0g el_pct float %9.0g read_scr float %9.0g math_scr float %9.0g ------------------------------------------------------------------------------- Sorted by: . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- observatio~r | 420 210.5 121.3878 1 420 dist_cod | 420 67472.81 3466.995 61382 75440 county | 0 district | 0 gr_span | 0 -------------+--------------------------------------------------------- enrl_tot | 420 2628.793 3913.105 81 27176 teachers | 420 129.0674 187.9127 4.85 1429 calw_pct | 420 13.24604 11.45482 0 78.9942 meal_pct | 420 44.70524 27.12338 0 100 computer | 420 303.3833 441.3413 0 3324 -------------+--------------------------------------------------------- testscr | 420 654.1565 19.05335 605.55 706.75 comp_stu | 420 .1359266 .0649558 0 .4208333 expn_stu | 420 5312.408 633.9371 3926.07 7711.507 str | 420 19.64043 1.891812 14 25.8 avginc | 420 15.31659 7.22589 5.335 55.328 -------------+--------------------------------------------------------- el_pct | 420 15.76816 18.28593 0 85.53972 read_scr | 420 654.9705 20.10798 604.5 704 math_scr | 420 653.3426 18.7542 605.4 709.5 . regress read_scr expn_stu comp_stu meal_pct Source | SS df MS Number of obs = 420 -------------+---------------------------------- F(3, 416) = 565.36 Model | 136046.267 3 45348.7558 Prob &gt; F = 0.0000 Residual | 33368.3632 416 80.2124115 R-squared = 0.8030 -------------+---------------------------------- Adj R-squared = 0.8016 Total | 169414.631 419 404.330861 Root MSE = 8.9561 ------------------------------------------------------------------------------ read_scr | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- expn_stu | .0046699 .0007204 6.48 0.000 .0032538 .006086 comp_stu | 19.88584 7.168347 2.77 0.006 5.795143 33.97654 meal_pct | -.635131 .0164777 -38.54 0.000 -.667521 -.602741 _cons | 655.8528 3.812206 172.04 0.000 648.3592 663.3464 ------------------------------------------------------------------------------ . regress read_scr expn_stu comp_stu meal_pct [aw = enrl_tot] (sum of wgt is 1,104,093) Source | SS df MS Number of obs = 420 -------------+---------------------------------- F(3, 416) = 906.75 Model | 123692.671 3 41230.8903 Prob &gt; F = 0.0000 Residual | 18915.9815 416 45.4711093 R-squared = 0.8674 -------------+---------------------------------- Adj R-squared = 0.8664 Total | 142608.652 419 340.354779 Root MSE = 6.7432 ------------------------------------------------------------------------------ read_scr | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- expn_stu | .0055534 .0008322 6.67 0.000 .0039176 .0071892 comp_stu | 27.26378 8.197228 3.33 0.001 11.15063 43.37693 meal_pct | -.6352229 .013149 -48.31 0.000 -.6610696 -.6093762 _cons | 648.988 4.163875 155.86 0.000 640.8031 657.1728 ------------------------------------------------------------------------------ 6.3 Serial Correlation in the Error Distribution 6.3.1 Testing for Serial Correlation . use ukrates.. describe Contains data from ukrates.dta obs: 526 vars: 3 2 Dec 2004 10:43 size: 6,312 ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- rs float %9.0g month float %tm r20 float %9.0g ------------------------------------------------------------------------------- Sorted by: month . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- rs | 526 7.651513 3.553109 1.561667 16.18 month | 526 168.5 151.9874 -94 431 r20 | 526 8.863726 3.224372 3.35 17.18 . regress D.rs LD.r20 Source | SS df MS Number of obs = 524 -------------+---------------------------------- F(1, 522) = 52.88 Model | 13.8769739 1 13.8769739 Prob &gt; F = 0.0000 Residual | 136.988471 522 .262430021 R-squared = 0.0920 -------------+---------------------------------- Adj R-squared = 0.0902 Total | 150.865445 523 .288461654 Root MSE = .51228 ------------------------------------------------------------------------------ D.rs | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- r20 | LD. | .4882883 .0671484 7.27 0.000 .356374 .6202027 | _cons | .0040183 .022384 0.18 0.858 -.0399555 .0479921 ------------------------------------------------------------------------------ . predict double eps, residual (2 missing values generated) . estat bgodfrey, lags(6) Breusch-Godfrey LM test for autocorrelation --------------------------------------------------------------------------- lags(p) | chi2 df Prob &gt; chi2 -------------+------------------------------------------------------------- 6 | 17.237 6 0.0084 --------------------------------------------------------------------------- H0: no serial correlation . wntestq eps Portmanteau test for white noise --------------------------------------- Portmanteau (Q) statistic = 82.3882 Prob &gt; chi2(40) = 0.0001 . ac eps Autocorrelogram of regression residuals 6.3.2 FGLS Estimation with Serial Correlation . use ukrates.. regress D.rs LD.r20 Source | SS df MS Number of obs = 524 -------------+---------------------------------- F(1, 522) = 52.88 Model | 13.8769739 1 13.8769739 Prob &gt; F = 0.0000 Residual | 136.988471 522 .262430021 R-squared = 0.0920 -------------+---------------------------------- Adj R-squared = 0.0902 Total | 150.865445 523 .288461654 Root MSE = .51228 ------------------------------------------------------------------------------ D.rs | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- r20 | LD. | .4882883 .0671484 7.27 0.000 .356374 .6202027 | _cons | .0040183 .022384 0.18 0.858 -.0399555 .0479921 ------------------------------------------------------------------------------ . prais D.rs LD.r20, nolog Prais-Winsten AR(1) regression -- iterated estimates Source | SS df MS Number of obs = 524 -------------+---------------------------------- F(1, 522) = 25.73 Model | 6.56420242 1 6.56420242 Prob &gt; F = 0.0000 Residual | 133.146932 522 .25507075 R-squared = 0.0470 -------------+---------------------------------- Adj R-squared = 0.0452 Total | 139.711134 523 .2671341 Root MSE = .50505 ------------------------------------------------------------------------------ D.rs | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- r20 | LD. | .3495857 .068912 5.07 0.000 .2142067 .4849647 | _cons | .0049985 .0272145 0.18 0.854 -.0484649 .0584619 -------------+---------------------------------------------------------------- rho | .1895324 ------------------------------------------------------------------------------ Durbin-Watson statistic (original) 1.702273 Durbin-Watson statistic (transformed) 2.007414 "],
["regression-with-indicator-variables.html", "7 Regression with Indicator Variables 7.1 Testing for Significance of a Qualitative Factor 7.2 Regression with Qualitative &amp; Quantitative Factors 7.3 Seasonal Adjustment with Indicator Variables 7.4 Testing for Structural Stability &amp; Structural Change", " 7 Regression with Indicator Variables 7.1 Testing for Significance of a Qualitative Factor 7.1.1 Regression with One Qualitative Measure . use NEdata.. describe Contains data from NEdata.dta obs: 120 vars: 6 24 Oct 2004 13:28 size: 2,640 ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- state long %8.0g state year int %8.0g pop float %9.0g dpi float %9.0g dpipc float %9.0g ldpipc float %9.0g ------------------------------------------------------------------------------- Sorted by: . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- state | 120 3.5 1.714986 1 6 year | 120 1990.5 5.790459 1981 2000 pop | 120 2196276 1931629 515594 6362076 dpi | 120 4.33e+07 4.46e+07 4385134 1.93e+08 dpipc | 120 18.15802 5.662848 8.153382 33.38758 -------------+--------------------------------------------------------- ldpipc | 120 2.848302 .3265395 2.098433 3.508184 . mean dpipc, over(state) Mean estimation Number of obs = 120 CT: state = CT MA: state = MA ME: state = ME NH: state = NH RI: state = RI VT: state = VT -------------------------------------------------------------- Over | Mean Std. Err. [95% Conf. Interval] -------------+------------------------------------------------ dpipc | CT | 22.32587 1.413766 19.52647 25.12527 MA | 19.77681 1.298507 17.20564 22.34798 ME | 15.17391 .9571251 13.27871 17.06911 NH | 18.66835 1.193137 16.30582 21.03088 RI | 17.26529 1.045117 15.19586 19.33473 VT | 15.73786 1.020159 13.71784 17.75788 -------------------------------------------------------------- . tabulate state, generate(NE) state | Freq. Percent Cum. ------------+----------------------------------- CT | 20 16.67 16.67 MA | 20 16.67 33.33 ME | 20 16.67 50.00 NH | 20 16.67 66.67 RI | 20 16.67 83.33 VT | 20 16.67 100.00 ------------+----------------------------------- Total | 120 100.00 . regress dpipc NE2-NE6 Source | SS df MS Number of obs = 120 -------------+---------------------------------- F(5, 114) = 5.27 Model | 716.218512 5 143.243702 Prob &gt; F = 0.0002 Residual | 3099.85511 114 27.1917115 R-squared = 0.1877 -------------+---------------------------------- Adj R-squared = 0.1521 Total | 3816.07362 119 32.0678456 Root MSE = 5.2146 ------------------------------------------------------------------------------ dpipc | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- NE2 | -2.549057 1.648991 -1.55 0.125 -5.815695 .7175814 NE3 | -7.151959 1.648991 -4.34 0.000 -10.4186 -3.88532 NE4 | -3.65752 1.648991 -2.22 0.029 -6.924158 -.3908815 NE5 | -5.060575 1.648991 -3.07 0.003 -8.327214 -1.793937 NE6 | -6.588007 1.648991 -4.00 0.000 -9.854646 -3.321369 _cons | 22.32587 1.166013 19.15 0.000 20.01601 24.63573 ------------------------------------------------------------------------------ . use NEdata.. tabulate state, generate(NE) state | Freq. Percent Cum. ------------+----------------------------------- CT | 20 16.67 16.67 MA | 20 16.67 33.33 ME | 20 16.67 50.00 NH | 20 16.67 66.67 RI | 20 16.67 83.33 VT | 20 16.67 100.00 ------------+----------------------------------- Total | 120 100.00 . forvalues i = 1/5 { 2. generate NE_`i&#39; = NE`i&#39; - NE6 3. } . regress dpipc NE_* Source | SS df MS Number of obs = 120 -------------+---------------------------------- F(5, 114) = 5.27 Model | 716.218512 5 143.243702 Prob &gt; F = 0.0002 Residual | 3099.85511 114 27.1917115 R-squared = 0.1877 -------------+---------------------------------- Adj R-squared = 0.1521 Total | 3816.07362 119 32.0678456 Root MSE = 5.2146 ------------------------------------------------------------------------------ dpipc | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- NE_1 | 4.167853 1.064419 3.92 0.000 2.059247 6.276459 NE_2 | 1.618796 1.064419 1.52 0.131 -.48981 3.727402 NE_3 | -2.984106 1.064419 -2.80 0.006 -5.092712 -.8754996 NE_4 | .5103331 1.064419 0.48 0.633 -1.598273 2.618939 NE_5 | -.8927223 1.064419 -0.84 0.403 -3.001328 1.215884 _cons | 18.15802 .4760227 38.15 0.000 17.21502 19.10101 ------------------------------------------------------------------------------ . . lincom -(NE_1 + NE_2 + NE_3 + NE_4 + NE_5) ( 1) - NE_1 - NE_2 - NE_3 - NE_4 - NE_5 = 0 ------------------------------------------------------------------------------ dpipc | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- (1) | -2.420154 1.064419 -2.27 0.025 -4.52876 -.3115483 ------------------------------------------------------------------------------ 7.1.2 Regression with Two Qualitative Measures . use nlsw88.(NLSW, 1988 extract) . describe Contains data from nlsw88.dta obs: 2,246 NLSW, 1988 extract vars: 17 21 Jun 2006 11:33 size: 60,642 (_dta has notes) ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- idcode int %8.0g NLS id age byte %8.0g age in current year race byte %8.0g racelbl race married byte %8.0g marlbl married never_married byte %8.0g never married grade byte %8.0g current grade completed collgrad byte %16.0g gradlbl college graduate south byte %8.0g lives in south smsa byte %9.0g smsalbl lives in SMSA c_city byte %8.0g lives in central city industry byte %23.0g indlbl industry occupation byte %22.0g occlbl occupation union byte %8.0g unionlbl union worker wage float %9.0g hourly wage hours byte %8.0g usual hours worked ttl_exp float %9.0g total work experience tenure float %9.0g job tenure (years) ------------------------------------------------------------------------------- Sorted by: idcode . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- idcode | 2,246 2612.654 1480.864 1 5159 age | 2,246 39.15316 3.060002 34 46 race | 2,246 1.282725 .4754413 1 3 married | 2,246 .6420303 .4795099 0 1 never_marr~d | 2,246 .1041852 .3055687 0 1 -------------+--------------------------------------------------------- grade | 2,244 13.09893 2.521246 0 18 collgrad | 2,246 .2368655 .4252538 0 1 south | 2,246 .4194123 .4935728 0 1 smsa | 2,246 .7039181 .4566292 0 1 c_city | 2,246 .2916296 .4546139 0 1 -------------+--------------------------------------------------------- industry | 2,232 8.189516 3.010875 1 12 occupation | 2,237 4.642825 3.408897 1 13 union | 1,878 .2454739 .4304825 0 1 wage | 2,246 7.766949 5.755523 1.004952 40.74659 hours | 2,242 37.21811 10.50914 1 80 -------------+--------------------------------------------------------- ttl_exp | 2,246 12.53498 4.610208 .1153846 28.88461 tenure | 2,231 5.97785 5.510331 0 25.91667 . keep if !missing(wage + race + union) (368 observations deleted) . generate lwage = log(wage) . tabulate race, generate(R) race | Freq. Percent Cum. ------------+----------------------------------- white | 1,353 72.04 72.04 black | 501 26.68 98.72 other | 24 1.28 100.00 ------------+----------------------------------- Total | 1,878 100.00 . regress lwage R1 R2 union Source | SS df MS Number of obs = 1,878 -------------+---------------------------------- F(3, 1874) = 38.73 Model | 29.3349228 3 9.77830761 Prob &gt; F = 0.0000 Residual | 473.119209 1,874 .252464893 R-squared = 0.0584 -------------+---------------------------------- Adj R-squared = 0.0569 Total | 502.454132 1,877 .267690001 Root MSE = .50246 ------------------------------------------------------------------------------ lwage | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- R1 | -.0349326 .1035125 -0.34 0.736 -.2379444 .1680793 R2 | -.2133924 .1049954 -2.03 0.042 -.4193126 -.0074721 union | .239083 .0270353 8.84 0.000 .1860606 .2921054 _cons | 1.913178 .1029591 18.58 0.000 1.711252 2.115105 ------------------------------------------------------------------------------ . test R1 R2 ( 1) R1 = 0 ( 2) R2 = 0 F( 2, 1874) = 23.25 Prob &gt; F = 0.0000 7.1.2.1 Interaction Effects . use nlsw88.(NLSW, 1988 extract) . keep if !missing(wage + race + union) (368 observations deleted) . generate lwage = log(wage) . tabulate race, generate(R) race | Freq. Percent Cum. ------------+----------------------------------- white | 1,353 72.04 72.04 black | 501 26.68 98.72 other | 24 1.28 100.00 ------------+----------------------------------- Total | 1,878 100.00 . generate R1u = R1 * union . generate R2u = R2 * union . regress lwage R1 R2 union R1u R2u Source | SS df MS Number of obs = 1,878 -------------+---------------------------------- F(5, 1872) = 26.63 Model | 33.3636017 5 6.67272035 Prob &gt; F = 0.0000 Residual | 469.09053 1,872 .250582548 R-squared = 0.0664 -------------+---------------------------------- Adj R-squared = 0.0639 Total | 502.454132 1,877 .267690001 Root MSE = .50058 ------------------------------------------------------------------------------ lwage | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- R1 | -.1818955 .1260945 -1.44 0.149 -.4291962 .0654051 R2 | -.4152863 .1279741 -3.25 0.001 -.6662731 -.1642995 union | -.2375316 .2167585 -1.10 0.273 -.6626452 .187582 R1u | .4232627 .2192086 1.93 0.054 -.0066561 .8531816 R2u | .6193578 .2221704 2.79 0.005 .1836302 1.055085 _cons | 2.07205 .1251456 16.56 0.000 1.82661 2.317489 ------------------------------------------------------------------------------ . test R1u R2u ( 1) R1u = 0 ( 2) R2u = 0 F( 2, 1872) = 8.04 Prob &gt; F = 0.0003 7.2 Regression with Qualitative &amp; Quantitative Factors . use nlsw88.(NLSW, 1988 extract) . keep if !missing(wage + race + union) (368 observations deleted) . generate lwage = log(wage) . tabulate race, generate(R) race | Freq. Percent Cum. ------------+----------------------------------- white | 1,353 72.04 72.04 black | 501 26.68 98.72 other | 24 1.28 100.00 ------------+----------------------------------- Total | 1,878 100.00 . regress lwage R1 R2 union tenure Source | SS df MS Number of obs = 1,868 -------------+---------------------------------- F(4, 1863) = 85.88 Model | 77.1526731 4 19.2881683 Prob &gt; F = 0.0000 Residual | 418.434693 1,863 .224602626 R-squared = 0.1557 -------------+---------------------------------- Adj R-squared = 0.1539 Total | 495.587366 1,867 .265445831 Root MSE = .47392 ------------------------------------------------------------------------------ lwage | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- R1 | -.070349 .0976711 -0.72 0.471 -.2619053 .1212073 R2 | -.2612185 .0991154 -2.64 0.008 -.4556074 -.0668297 union | .1871116 .0257654 7.26 0.000 .1365794 .2376438 tenure | .0289352 .0019646 14.73 0.000 .0250823 .0327882 _cons | 1.777386 .0975549 18.22 0.000 1.586058 1.968715 ------------------------------------------------------------------------------ . test R1 R2 ( 1) R1 = 0 ( 2) R2 = 0 F( 2, 1863) = 29.98 Prob &gt; F = 0.0000 7.2.1 Testing for Slope Differences . use nlsw88.(NLSW, 1988 extract) . keep if !missing(wage + race + union) (368 observations deleted) . generate lwage = log(wage) . tabulate race, generate(R) race | Freq. Percent Cum. ------------+----------------------------------- white | 1,353 72.04 72.04 black | 501 26.68 98.72 other | 24 1.28 100.00 ------------+----------------------------------- Total | 1,878 100.00 . generate uTen = union * tenure (10 missing values generated) . regress lwage R1 R2 union tenure uTen Source | SS df MS Number of obs = 1,868 -------------+---------------------------------- F(5, 1862) = 69.27 Model | 77.726069 5 15.5452138 Prob &gt; F = 0.0000 Residual | 417.861297 1,862 .224415304 R-squared = 0.1568 -------------+---------------------------------- Adj R-squared = 0.1546 Total | 495.587366 1,867 .265445831 Root MSE = .47372 ------------------------------------------------------------------------------ lwage | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- R1 | -.0715443 .0976332 -0.73 0.464 -.2630264 .1199377 R2 | -.2638742 .0990879 -2.66 0.008 -.4582093 -.0695391 union | .2380442 .0409706 5.81 0.000 .157691 .3183975 tenure | .0309616 .0023374 13.25 0.000 .0263774 .0355458 uTen | -.0068913 .0043112 -1.60 0.110 -.0153467 .001564 _cons | 1.766484 .0977525 18.07 0.000 1.574768 1.9582 ------------------------------------------------------------------------------ . . generate R1ten = R1 * tenure (10 missing values generated) . generate R2ten = R2 * tenure (10 missing values generated) . regress lwage R1 R2 union tenure R1ten R2ten Source | SS df MS Number of obs = 1,868 -------------+---------------------------------- F(6, 1861) = 57.26 Model | 77.2369283 6 12.8728214 Prob &gt; F = 0.0000 Residual | 418.350438 1,861 .224798731 R-squared = 0.1558 -------------+---------------------------------- Adj R-squared = 0.1531 Total | 495.587366 1,867 .265445831 Root MSE = .47413 ------------------------------------------------------------------------------ lwage | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- R1 | -.082753 .1395 -0.59 0.553 -.3563459 .1908398 R2 | -.291495 .1422361 -2.05 0.041 -.570454 -.012536 union | .1876079 .0257915 7.27 0.000 .1370246 .2381912 tenure | .0257611 .0186309 1.38 0.167 -.0107785 .0623007 R1ten | .0024973 .0187646 0.13 0.894 -.0343045 .0392991 R2ten | .0050825 .018999 0.27 0.789 -.032179 .0423441 _cons | 1.794018 .1382089 12.98 0.000 1.522957 2.065078 ------------------------------------------------------------------------------ . test R1ten R2ten ( 1) R1ten = 0 ( 2) R2ten = 0 F( 2, 1861) = 0.19 Prob &gt; F = 0.8291 . . regress lwage R1 R2 union tenure uTen R1ten R2ten Source | SS df MS Number of obs = 1,868 -------------+---------------------------------- F(7, 1860) = 49.48 Model | 77.8008722 7 11.1144103 Prob &gt; F = 0.0000 Residual | 417.786494 1,860 .224616394 R-squared = 0.1570 -------------+---------------------------------- Adj R-squared = 0.1538 Total | 495.587366 1,867 .265445831 Root MSE = .47394 ------------------------------------------------------------------------------ lwage | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- R1 | -.0697096 .1396861 -0.50 0.618 -.3436676 .2042485 R2 | -.2795277 .1423788 -1.96 0.050 -.5587668 -.0002886 union | .238244 .0410597 5.80 0.000 .1577161 .3187718 tenure | .0304528 .0188572 1.61 0.106 -.0065308 .0674364 uTen | -.0068628 .0043311 -1.58 0.113 -.0153572 .0016316 R1ten | -.0001912 .0188335 -0.01 0.992 -.0371283 .0367459 R2ten | .0023429 .0190698 0.12 0.902 -.0350576 .0397433 _cons | 1.76904 .1390492 12.72 0.000 1.496331 2.041749 ------------------------------------------------------------------------------ . test uTen R1ten R2ten ( 1) uTen = 0 ( 2) R1ten = 0 ( 3) R2ten = 0 F( 3, 1860) = 0.96 Prob &gt; F = 0.4098 . . regress lwage union tenure uTen Source | SS df MS Number of obs = 1,868 -------------+---------------------------------- F(3, 1864) = 92.25 Model | 64.0664855 3 21.3554952 Prob &gt; F = 0.0000 Residual | 431.52088 1,864 .231502618 R-squared = 0.1293 -------------+---------------------------------- Adj R-squared = 0.1279 Total | 495.587366 1,867 .265445831 Root MSE = .48115 ------------------------------------------------------------------------------ lwage | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- union | .2144586 .0414898 5.17 0.000 .1330872 .29583 tenure | .0298926 .0023694 12.62 0.000 .0252456 .0345395 uTen | -.0056219 .0043756 -1.28 0.199 -.0142035 .0029597 _cons | 1.655054 .0193938 85.34 0.000 1.617018 1.69309 ------------------------------------------------------------------------------ . . regress lwage tenure if !union Source | SS df MS Number of obs = 1,408 -------------+---------------------------------- F(1, 1406) = 148.43 Model | 36.8472972 1 36.8472972 Prob &gt; F = 0.0000 Residual | 349.032053 1,406 .248244703 R-squared = 0.0955 -------------+---------------------------------- Adj R-squared = 0.0948 Total | 385.87935 1,407 .274256823 Root MSE = .49824 ------------------------------------------------------------------------------ lwage | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- tenure | .0298926 .0024536 12.18 0.000 .0250795 .0347056 _cons | 1.655054 .0200828 82.41 0.000 1.615659 1.69445 ------------------------------------------------------------------------------ . predict double unw if e(sample), res (470 missing values generated) . . regress lwage tenure if union Source | SS df MS Number of obs = 460 -------------+---------------------------------- F(1, 458) = 55.95 Model | 10.0775663 1 10.0775663 Prob &gt; F = 0.0000 Residual | 82.4888278 458 .180106611 R-squared = 0.1089 -------------+---------------------------------- Adj R-squared = 0.1069 Total | 92.5663941 459 .201669704 Root MSE = .42439 ------------------------------------------------------------------------------ lwage | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- tenure | .0242707 .0032447 7.48 0.000 .0178944 .0306469 _cons | 1.869513 .0323515 57.79 0.000 1.805937 1.933088 ------------------------------------------------------------------------------ . predict double nunw if e(sample), res (1,418 missing values generated) . . generate double allres = nunw (1,418 missing values generated) . replace allres = unw if unw &lt;. (1,408 real changes made) . sdtest allres, by(union) Variance ratio test ------------------------------------------------------------------------------ Group | Obs Mean Std. Err. Std. Dev. [95% Conf. Interval] ---------+-------------------------------------------------------------------- nonunion | 1,408 7.51e-17 .0132735 .4980645 -.0260379 .0260379 union | 460 3.33e-17 .0197657 .4239271 -.0388425 .0388425 ---------+-------------------------------------------------------------------- combined | 1,868 6.48e-17 .0111235 .4807605 -.0218157 .0218157 ------------------------------------------------------------------------------ ratio = sd(nonunion) / sd(union) f = 1.3803 Ho: ratio = 1 degrees of freedom = 1407, 459 Ha: ratio &lt; 1 Ha: ratio != 1 Ha: ratio &gt; 1 Pr(F &lt; f) = 1.0000 2*Pr(F &gt; f) = 0.0000 Pr(F &gt; f) = 0.0000 . . regress lwage union tenure uTen, robust Linear regression Number of obs = 1,868 F(3, 1864) = 109.84 Prob &gt; F = 0.0000 R-squared = 0.1293 Root MSE = .48115 ------------------------------------------------------------------------------ | Robust lwage | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- union | .2144586 .0407254 5.27 0.000 .1345864 .2943308 tenure | .0298926 .0023964 12.47 0.000 .0251928 .0345924 uTen | -.0056219 .0038631 -1.46 0.146 -.0131984 .0019546 _cons | 1.655054 .0210893 78.48 0.000 1.613693 1.696415 ------------------------------------------------------------------------------ 7.3 Seasonal Adjustment with Indicator Variables . use turksales.. describe Contains data from turksales.dta obs: 40 vars: 2 21 Jun 2006 11:33 size: 320 (_dta has notes) ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- t float %tq sales float %9.0g ------------------------------------------------------------------------------- Sorted by: t . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- t | 40 139.5 11.69045 120 159 sales | 40 105.6178 4.056961 97.84603 112.9617 . summarize sales, meanonly . generate mu = r(mean) . forvalues i=1/3 { 2. generate qseas`i&#39;= (quarter(dofq(t)) == `i&#39;) 3. } . regress sales qseas* Source | SS df MS Number of obs = 40 -------------+---------------------------------- F(3, 36) = 4.03 Model | 161.370376 3 53.7901254 Prob &gt; F = 0.0143 Residual | 480.52796 36 13.3479989 R-squared = 0.2514 -------------+---------------------------------- Adj R-squared = 0.1890 Total | 641.898336 39 16.4589317 Root MSE = 3.6535 ------------------------------------------------------------------------------ sales | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- qseas1 | -5.232047 1.633891 -3.20 0.003 -8.545731 -1.918362 qseas2 | -2.842753 1.633891 -1.74 0.090 -6.156437 .4709317 qseas3 | -.8969368 1.633891 -0.55 0.586 -4.210621 2.416748 _cons | 107.8608 1.155335 93.36 0.000 105.5177 110.2039 ------------------------------------------------------------------------------ . predict double salesSA, residual . replace salesSA = salesSA + mu (40 real changes made) . summarize sales salesSA Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- sales | 40 105.6178 4.056961 97.84603 112.9617 salesSA | 40 105.6178 3.510161 97.49429 111.9563 . . label var salesSA &quot;sales, seasonally adjusted&quot; . tsline sales salesSA, lpattern(solid dash) . . regress sales qseas* t Source | SS df MS Number of obs = 40 -------------+---------------------------------- F(4, 35) = 54.23 Model | 552.710487 4 138.177622 Prob &gt; F = 0.0000 Residual | 89.1878487 35 2.54822425 R-squared = 0.8611 -------------+---------------------------------- Adj R-squared = 0.8452 Total | 641.898336 39 16.4589317 Root MSE = 1.5963 ------------------------------------------------------------------------------ sales | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- qseas1 | -4.415311 .7169299 -6.16 0.000 -5.870756 -2.959866 qseas2 | -2.298262 .7152449 -3.21 0.003 -3.750287 -.846238 qseas3 | -.6246916 .7142321 -0.87 0.388 -2.07466 .8252766 t | .2722452 .0219686 12.39 0.000 .2276466 .3168438 _cons | 69.47421 3.138432 22.14 0.000 63.10285 75.84556 ------------------------------------------------------------------------------ . test qseas1 qseas2 qseas3 ( 1) qseas1 = 0 ( 2) qseas2 = 0 ( 3) qseas3 = 0 F( 3, 35) = 15.17 Prob &gt; F = 0.0000 . predict double salesSADT, residual . replace salesSADT = salesSADT + mu (40 real changes made) . . label var salesSADT &quot;sales, detrende and SA&quot; . tsline sales salesSADT, lpattern(solid dash) yline(`mu&#39;) Seasonal adjustment of time series Seasonal adjustment and deterending of time series 7.4 Testing for Structural Stability &amp; Structural Change 7.4.1 Constraints of Continuity &amp; Differentiability . use nlsw88.(NLSW, 1988 extract) . describe Contains data from nlsw88.dta obs: 2,246 NLSW, 1988 extract vars: 17 21 Jun 2006 11:33 size: 60,642 (_dta has notes) ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- idcode int %8.0g NLS id age byte %8.0g age in current year race byte %8.0g racelbl race married byte %8.0g marlbl married never_married byte %8.0g never married grade byte %8.0g current grade completed collgrad byte %16.0g gradlbl college graduate south byte %8.0g lives in south smsa byte %9.0g smsalbl lives in SMSA c_city byte %8.0g lives in central city industry byte %23.0g indlbl industry occupation byte %22.0g occlbl occupation union byte %8.0g unionlbl union worker wage float %9.0g hourly wage hours byte %8.0g usual hours worked ttl_exp float %9.0g total work experience tenure float %9.0g job tenure (years) ------------------------------------------------------------------------------- Sorted by: idcode . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- idcode | 2,246 2612.654 1480.864 1 5159 age | 2,246 39.15316 3.060002 34 46 race | 2,246 1.282725 .4754413 1 3 married | 2,246 .6420303 .4795099 0 1 never_marr~d | 2,246 .1041852 .3055687 0 1 -------------+--------------------------------------------------------- grade | 2,244 13.09893 2.521246 0 18 collgrad | 2,246 .2368655 .4252538 0 1 south | 2,246 .4194123 .4935728 0 1 smsa | 2,246 .7039181 .4566292 0 1 c_city | 2,246 .2916296 .4546139 0 1 -------------+--------------------------------------------------------- industry | 2,232 8.189516 3.010875 1 12 occupation | 2,237 4.642825 3.408897 1 13 union | 1,878 .2454739 .4304825 0 1 wage | 2,246 7.766949 5.755523 1.004952 40.74659 hours | 2,242 37.21811 10.50914 1 80 -------------+--------------------------------------------------------- ttl_exp | 2,246 12.53498 4.610208 .1153846 28.88461 tenure | 2,231 5.97785 5.510331 0 25.91667 . generate lwage = log(wage) . generate Ten2 = tenure &lt;= 2 . generate Ten7 = !Ten2 &amp; tenure &lt;= 7 . generate Ten12 = !Ten2 &amp; !Ten7 &amp; tenure &lt;= 12 . generate Ten25 = !Ten2 &amp; !Ten7 &amp; !Ten12 &amp; tenure &lt; . . . generate tTen2 = tenure * Ten2 (15 missing values generated) . generate tTen7 = tenure * Ten7 (15 missing values generated) . generate tTen12 = tenure * Ten12 (15 missing values generated) . generate tTen25 = tenure * Ten25 (15 missing values generated) . . regress lwage Ten* tTen*, nocons hascons Source | SS df MS Number of obs = 2,231 -------------+---------------------------------- F(7, 2223) = 37.12 Model | 76.6387069 7 10.9483867 Prob &gt; F = 0.0000 Residual | 655.578361 2,223 .294907045 R-squared = 0.1047 -------------+---------------------------------- Adj R-squared = 0.1018 Total | 732.217068 2,230 .328348461 Root MSE = .54305 ------------------------------------------------------------------------------ lwage | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- Ten2 | 1.55662 .0383259 40.62 0.000 1.481462 1.631778 Ten7 | 1.708728 .060084 28.44 0.000 1.590901 1.826554 Ten12 | 1.870808 .1877798 9.96 0.000 1.502566 2.23905 Ten25 | 1.751961 .1691799 10.36 0.000 1.420194 2.083728 tTen2 | .0897426 .0331563 2.71 0.007 .0247221 .1547631 tTen7 | .0434089 .0140739 3.08 0.002 .0158095 .0710083 tTen12 | .0154208 .019786 0.78 0.436 -.0233801 .0542218 tTen25 | .0238014 .0102917 2.31 0.021 .0036191 .0439837 ------------------------------------------------------------------------------ . predict double lwagehat (option xb assumed; fitted values) (15 missing values generated) . . label var lwagehat &quot;Predicted log(wage)&quot; . sort tenure . . twoway (line lwagehat tenure if tenure &lt;= 2) (line lwagehat tenure if tenure &gt; &gt; 2 &amp; tenure &lt;= 7) (line lwagehat tenure if tenure &gt; 7 &amp; tenure &lt;= 12) (lin &gt; e lwagehat tenure if tenure &gt; 12 &amp; tenure &lt; .), legend(off) . . mkspline sTen2 2 sTen7 7 sTen12 12 sTen25 = tenure . regress lwage sTen* Source | SS df MS Number of obs = 2,231 -------------+---------------------------------- F(4, 2226) = 64.55 Model | 76.1035947 4 19.0258987 Prob &gt; F = 0.0000 Residual | 656.113473 2,226 .294749988 R-squared = 0.1039 -------------+---------------------------------- Adj R-squared = 0.1023 Total | 732.217068 2,230 .328348461 Root MSE = .54291 ------------------------------------------------------------------------------ lwage | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- sTen2 | .1173168 .0248619 4.72 0.000 .0685619 .1660716 sTen7 | .0471177 .009448 4.99 0.000 .02859 .0656455 sTen12 | .0055041 .0111226 0.49 0.621 -.0163076 .0273158 sTen25 | .0237767 .0083618 2.84 0.005 .007379 .0401744 _cons | 1.539985 .0359605 42.82 0.000 1.469465 1.610505 ------------------------------------------------------------------------------ . . predict double lwageSpline (option xb assumed; fitted values) (15 missing values generated) . . label var lwageSpline &quot;Predicted log(wage), splined&quot; . twoway line lwageSpline tenure . Piecewise wage-tenure profile Piecewise linear wage-tenure profile 7.4.2 Structural Change in a Time Series Model "],
["instrumental-variables-estimators.html", "8 Instrumental Variables Estimators 8.1 Introduction 8.2 Endogeneity in Economic Relationships 8.3 2SLS 8.4 The ivreg Command 8.5 Identification &amp; Tests of Overidentifying Restrictions 8.6 Computing IV Estimates 8.7 ivreg2 &amp; GMM Estimation 8.8 Testing &amp; Overidentifying Restrictions in GMM 8.9 Testing for Heteroskedasticity in the IV context 8.10 Testing the Relevance of Instruments 8.11 Durbin–Wu–Hausman Tests for Endogeneity in IV Estimation", " 8 Instrumental Variables Estimators 8.1 Introduction 8.2 Endogeneity in Economic Relationships 8.3 2SLS 8.4 The ivreg Command 8.5 Identification &amp; Tests of Overidentifying Restrictions 8.6 Computing IV Estimates . use griliches.(Wages of Very Young Men, Zvi Griliches, J.Pol.Ec. 1976) . describe Contains data from griliches.dta obs: 758 Wages of Very Young Men, Zvi Griliches, J.Pol.Ec. 1976 vars: 26 31 Oct 2004 14:12 size: 65,188 ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- rns float %9.0g residency in South rns80 float %9.0g mrt float %9.0g marital status = 1 if married mrt80 float %9.0g smsa float %9.0g reside metro area = 1 if urban smsa80 float %9.0g med float %9.0g mother&#39;s education, years iq float %9.0g iq score kww float %9.0g score on knowledge in world of work test year float %9.0g age float %9.0g age80 float %9.0g s float %9.0g completed years of schooling s80 float %9.0g expr float %9.0g experience, years expr80 float %9.0g tenure float %9.0g tenure, years tenure80 float %9.0g lw float %9.0g log wage lw80 float %9.0g _Iyear_67 byte %8.0g year==67 _Iyear_68 byte %8.0g year==68 _Iyear_69 byte %8.0g year==69 _Iyear_70 byte %8.0g year==70 _Iyear_71 byte %8.0g year==71 _Iyear_73 byte %8.0g year==73 ------------------------------------------------------------------------------- Sorted by: . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- rns | 758 .2691293 .4438001 0 1 rns80 | 758 .292876 .4553825 0 1 mrt | 758 .5145119 .5001194 0 1 mrt80 | 758 .8984169 .3022988 0 1 smsa | 758 .7044855 .456575 0 1 -------------+--------------------------------------------------------- smsa80 | 758 .7124011 .452942 0 1 med | 758 10.91029 2.74112 0 18 iq | 758 103.8562 13.61867 54 145 kww | 758 36.57388 7.302247 12 56 year | 758 69.03166 2.631794 66 73 -------------+--------------------------------------------------------- age | 758 21.83509 2.981756 16 30 age80 | 758 33.01187 3.085504 28 38 s | 758 13.40501 2.231828 9 18 s80 | 758 13.70712 2.214693 9 18 expr | 758 1.735429 2.105542 0 11.444 -------------+--------------------------------------------------------- expr80 | 758 11.39426 4.210745 .692 22.045 tenure | 758 1.831135 1.67363 0 10 tenure80 | 758 7.362797 5.05024 0 22 lw | 758 5.686739 .4289494 4.605 7.051 lw80 | 758 6.826555 .4099268 4.749 8.032 -------------+--------------------------------------------------------- _Iyear_67 | 758 .0831135 .2762359 0 1 _Iyear_68 | 758 .1042216 .3057496 0 1 _Iyear_69 | 758 .1121372 .3157435 0 1 _Iyear_70 | 758 .0844327 .2782193 0 1 _Iyear_71 | 758 .121372 .3267747 0 1 -------------+--------------------------------------------------------- _Iyear_73 | 758 .2084433 .4064636 0 1 . use griliches.(Wages of Very Young Men, Zvi Griliches, J.Pol.Ec. 1976) . ivreg lw s expr tenure rns smsa _I* (iq=med kww age mrt), first First-stage regressions ----------------------- Source | SS df MS Number of obs = 758 -------------+---------------------------------- F(15, 742) = 25.03 Model | 47176.4676 15 3145.09784 Prob &gt; F = 0.0000 Residual | 93222.8583 742 125.637275 R-squared = 0.3360 -------------+---------------------------------- Adj R-squared = 0.3226 Total | 140399.326 757 185.468066 Root MSE = 11.209 ------------------------------------------------------------------------------ iq | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- s | 2.497742 .2858159 8.74 0.000 1.936638 3.058846 expr | -.033548 .2534458 -0.13 0.895 -.5311042 .4640082 tenure | .6158215 .2731146 2.25 0.024 .0796522 1.151991 rns | -2.610221 .9499731 -2.75 0.006 -4.475177 -.7452663 smsa | .0260481 .9222585 0.03 0.977 -1.784499 1.836595 _Iyear_67 | .9254935 1.655969 0.56 0.576 -2.325449 4.176436 _Iyear_68 | .4706951 1.574561 0.30 0.765 -2.620429 3.56182 _Iyear_69 | 2.164635 1.521387 1.42 0.155 -.8221007 5.15137 _Iyear_70 | 5.734786 1.696033 3.38 0.001 2.405191 9.064381 _Iyear_71 | 5.180639 1.562156 3.32 0.001 2.113866 8.247411 _Iyear_73 | 4.526686 1.48294 3.05 0.002 1.615429 7.437943 med | .2877745 .1622338 1.77 0.077 -.0307176 .6062665 kww | .4581116 .0699323 6.55 0.000 .3208229 .5954003 age | -.8809144 .2232535 -3.95 0.000 -1.319198 -.4426307 mrt | -.584791 .946056 -0.62 0.537 -2.442056 1.272474 _cons | 67.20449 4.107281 16.36 0.000 59.14121 75.26776 ------------------------------------------------------------------------------ Instrumental variables (2SLS) regression Source | SS df MS Number of obs = 758 -------------+---------------------------------- F(12, 745) = 45.91 Model | 59.2679161 12 4.93899301 Prob &gt; F = 0.0000 Residual | 80.0182337 745 .107407025 R-squared = 0.4255 -------------+---------------------------------- Adj R-squared = 0.4163 Total | 139.28615 757 .183997556 Root MSE = .32773 ------------------------------------------------------------------------------ lw | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- iq | .0001747 .0039374 0.04 0.965 -.0075551 .0079044 s | .0691759 .013049 5.30 0.000 .0435587 .0947931 expr | .029866 .006697 4.46 0.000 .0167189 .0430132 tenure | .0432738 .0076934 5.62 0.000 .0281705 .058377 rns | -.1035897 .0297371 -3.48 0.001 -.1619682 -.0452111 smsa | .1351148 .0268889 5.02 0.000 .0823277 .1879019 _Iyear_67 | -.052598 .0481067 -1.09 0.275 -.1470388 .0418428 _Iyear_68 | .0794686 .0451078 1.76 0.079 -.009085 .1680222 _Iyear_69 | .2108962 .0443153 4.76 0.000 .1238984 .2978939 _Iyear_70 | .2386338 .0514161 4.64 0.000 .1376962 .3395714 _Iyear_71 | .2284609 .0441236 5.18 0.000 .1418396 .3150823 _Iyear_73 | .3258944 .0410718 7.93 0.000 .2452642 .4065247 _cons | 4.39955 .2708771 16.24 0.000 3.867777 4.931323 ------------------------------------------------------------------------------ Instrumented: iq Instruments: s expr tenure rns smsa _Iyear_67 _Iyear_68 _Iyear_69 _Iyear_70 _Iyear_71 _Iyear_73 med kww age mrt ------------------------------------------------------------------------------ 8.7 ivreg2 &amp; GMM Estimation 8.7.1 The GMM Estimator 8.7.2 GMM in a Homoskedastic Context 8.7.3 GMM &amp; Heteroskedasticity-Consistent Standard Errors . use griliches.(Wages of Very Young Men, Zvi Griliches, J.Pol.Ec. 1976) . ivreg2 lw s expr tenure rns smsa _I* (iq=med kww age mrt), gmm command ivreg2 is unrecognized r(199); end of do-file r(199); 8.7.4 GMM &amp; Clustering 8.7.5 GMM &amp; HAC Standard Errors 8.8 Testing &amp; Overidentifying Restrictions in GMM 8.8.1 Testing a subset of the Overidentifying Restrictions in GMM 8.9 Testing for Heteroskedasticity in the IV context 8.10 Testing the Relevance of Instruments 8.11 Durbin–Wu–Hausman Tests for Endogeneity in IV Estimation "],
["panel-data-models.html", "9 Panel Data Models 9.1 Fixed Effects &amp; Random Effects Models 9.2 IV Models for Panel Data 9.3 Dynamic Panel Data Models 9.4 Seemingly Unrelated Regression Models 9.5 Moving-Window Regression Estimates", " 9 Panel Data Models 9.1 Fixed Effects &amp; Random Effects Models 9.1.1 One-Way Fixed Effects Models . use traffic.. describe Contains data from traffic.dta obs: 336 vars: 54 30 Nov 2004 10:23 size: 61,152 ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- state float %9.0g sid State ID (FIPS) Code year int %9.0g Year spircons float %9.0g Spirits Consumption unrate float %9.0g Unemployment Rate perinc float %9.0g Per Capita Personal Income emppop float %9.0g Employment/Population Ratio beertax float %9.0g Tax on Case of Beer sobapt float %9.0g % Southern Baptist mormon float %9.0g % Mormon mlda float %9.0g Minimum Legal Drinking Age dry float %9.0g % Residing in Dry Counties yngdrv float %9.0g % of Drivers Aged 15-24 vmiles float %9.0g Ave. Mile per Driver breath byte %9.0g Prelim. Breath Test Law jaild byte %9.0g Mandatory Jail Sentence comserd byte %9.0g Mandatory Community Service allmort int %9.0g # of Vehicle Fatalities (#VF) mrall float %9.0g Vehicle Fatality Rate (VFR) allnite int %9.0g # of Night-time VF (#NVF) mralln float %9.0g Night-time VFR (NFVR) allsvn int %9.0g # of Single VF (#SVN) a1517 int %9.0g #VF, 15-17 year olds mra1517 float %9.0g VFR, 15-17 year olds a1517n byte %9.0g #NVF, 15-17 year olds mra1517n float %9.0g NVFR, 15-17 year olds a1820 int %9.0g #VF, 18-20 year olds a1820n int %9.0g #NVF, 18-20 year olds mra1820 float %9.0g VFR, 18-20 year olds mra1820n float %9.0g NVFR, 18-20 year olds a2124 int %9.0g #VF, 21-24 year olds mra2124 float %9.0g VFR, 21-24 year olds a2124n int %9.0g #NVF, 21-24 year olds mra2124n float %9.0g NVFR, 21-24 year olds aidall float %9.0g # of alcohol-involved VF mraidall float %9.0g Alcohol-Involved VFR pop float %9.0g Population pop1517 float %9.0g Population, 15-17 year olds pop1820 float %9.0g Population, 18-20 year olds pop2124 float %9.0g Population, 21-24 year olds miles float %9.0g total vehicle miles (millions unus float %9.0g U.S. unemployment rate epopus float %9.0g U.S. Emp/Pop Ratio gspch float %9.0g GSP Rate of Change stabrv str2 %9s region str2 %9s reg long %8.0g reg fatal float %9.0g fatal1517 float %9.0g fatal1820 float %9.0g fatal2124 float %9.0g fatal1517n float %9.0g fatal1820n float %9.0g fatal2124n float %9.0g perincK float %9.0g ------------------------------------------------------------------------------- Sorted by: . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- state | 336 30.1875 15.30985 1 56 year | 336 1985 2.002983 1982 1988 spircons | 336 1.75369 .6835745 .79 4.9 unrate | 336 7.346726 2.533405 2.4 18 perinc | 336 13880.18 2253.046 9513.762 22193.46 -------------+--------------------------------------------------------- emppop | 336 60.80568 4.721656 42.9932 71.26865 beertax | 336 .513256 .4778442 .0433109 2.720764 sobapt | 336 7.156925 9.762621 0 30.3557 mormon | 336 2.801933 9.665279 .1 65.9165 mlda | 336 20.45563 .8990255 18 21 -------------+--------------------------------------------------------- dry | 336 4.267074 9.500901 0 45.7921 yngdrv | 336 .1859299 .0248736 .073137 .281625 vmiles | 336 7890.754 1475.659 4576.346 26148.27 breath | 336 .4613095 .4992443 0 1 jaild | 335 .280597 .449963 0 1 -------------+--------------------------------------------------------- comserd | 335 .1850746 .388939 0 1 allmort | 336 928.6637 934.0515 79 5504 mrall | 336 .000204 .000057 .0000821 .0004218 allnite | 336 182.5833 188.4311 13 1049 mralln | 336 .0000388 .000011 .0000172 .0000944 -------------+--------------------------------------------------------- allsvn | 336 109.9494 108.5397 8 603 a1517 | 336 62.61012 55.72909 3 318 mra1517 | 336 .0003034 .0000937 .0001163 .0006735 a1517n | 336 12.2619 12.25341 0 76 mra1517n | 336 .0000598 .000033 0 .0002571 -------------+--------------------------------------------------------- a1820 | 336 106.6607 104.2236 7 601 a1820n | 336 33.52679 33.23834 0 196 mra1820 | 336 .0004728 .0001522 .0001855 .0010952 mra1820n | 336 .0001436 .0000613 0 .0005238 a2124 | 336 126.872 131.7886 12 770 -------------+--------------------------------------------------------- mra2124 | 336 .0004091 .0001225 .0002 .0008922 a2124n | 336 41.37798 42.93031 1 249 mra2124n | 336 .0001284 .0000422 .0000222 .0003143 aidall | 336 293.3332 303.5807 24.6 2094.9 mraidall | 336 .0000659 .000026 .0000234 .0001772 -------------+--------------------------------------------------------- pop | 336 4930272 5073704 478999.7 2.83e+07 pop1517 | 336 230815.5 229896.3 21000.02 1172000 pop1820 | 336 249090.4 249345.6 20999.96 1321004 pop2124 | 336 336389.9 345304.4 30000.16 1892998 miles | 336 37101.49 37454.37 3993 241575 -------------+--------------------------------------------------------- unus | 336 7.528571 1.479376 5.5 9.7 epopus | 336 59.97143 1.585048 57.8 62.3 gspch | 336 .0253135 .0431732 -.1236415 .1423609 stabrv | 0 region | 0 -------------+--------------------------------------------------------- reg | 336 2.395833 1.16971 1 4 fatal | 336 2.040444 .5701938 .82121 4.21784 fatal1517 | 336 3.033664 .9374229 1.16279 6.73469 fatal1820 | 336 4.727677 1.521962 1.854922 10.9524 fatal2124 | 336 4.091315 1.224812 2 8.92157 -------------+--------------------------------------------------------- fatal1517n | 336 .597681 .3297287 0 2.57143 fatal1820n | 336 1.436218 .6128804 0 5.2381 fatal2124n | 336 1.284335 .4224502 .22222 3.14286 perincK | 336 13.88018 2.253046 9.513762 22.19345 . xtsum fatal beertax spircons unrate perincK state year Variable | Mean Std. Dev. Min Max | Observations -----------------+--------------------------------------------+---------------- fatal overall | 2.040444 .5701938 .82121 4.21784 | N = 336 between | .5461407 1.110077 3.653197 | n = 48 within | .1794253 1.45556 2.962664 | T = 7 | | beertax overall | .513256 .4778442 .0433109 2.720764 | N = 336 between | .4789513 .0481679 2.440507 | n = 48 within | .0552203 .1415352 .7935126 | T = 7 | | spircons overall | 1.75369 .6835745 .79 4.9 | N = 336 between | .6734649 .8614286 4.388572 | n = 48 within | .147792 1.255119 2.265119 | T = 7 | | unrate overall | 7.346726 2.533405 2.4 18 | N = 336 between | 1.953377 4.1 13.2 | n = 48 within | 1.634257 4.046726 12.14673 | T = 7 | | perincK overall | 13.88018 2.253046 9.513762 22.19345 | N = 336 between | 2.122712 9.95087 19.51582 | n = 48 within | .8068546 11.43261 16.55782 | T = 7 | | state overall | 30.1875 15.30985 1 56 | N = 336 between | 15.44883 1 56 | n = 48 within | 0 30.1875 30.1875 | T = 7 | | year overall | 1985 2.002983 1982 1988 | N = 336 between | 0 1985 1985 | n = 48 within | 2.002983 1982 1988 | T = 7 . use traffic.. xtreg fatal beertax spircons unrate perincK, fe Fixed-effects (within) regression Number of obs = 336 Group variable: state Number of groups = 48 R-sq: Obs per group: within = 0.3526 min = 7 between = 0.1146 avg = 7.0 overall = 0.0863 max = 7 F(4,284) = 38.68 corr(u_i, Xb) = -0.8804 Prob &gt; F = 0.0000 ------------------------------------------------------------------------------ fatal | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- beertax | -.4840728 .1625106 -2.98 0.003 -.8039508 -.1641948 spircons | .8169652 .0792118 10.31 0.000 .6610484 .9728819 unrate | -.0290499 .0090274 -3.22 0.001 -.0468191 -.0112808 perincK | .1047103 .0205986 5.08 0.000 .064165 .1452555 _cons | -.383783 .4201781 -0.91 0.362 -1.210841 .4432754 -------------+---------------------------------------------------------------- sigma_u | 1.1181913 sigma_e | .15678965 rho | .98071823 (fraction of variance due to u_i) ------------------------------------------------------------------------------ F test that all u_i=0: F(47, 284) = 59.77 Prob &gt; F = 0.0000 9.1.2 Time Effects &amp; Two-Way Fixed Effects Models . use traffic.. tabulate year, generate(yr) Year | Freq. Percent Cum. ------------+----------------------------------- 1982 | 48 14.29 14.29 1983 | 48 14.29 28.57 1984 | 48 14.29 42.86 1985 | 48 14.29 57.14 1986 | 48 14.29 71.43 1987 | 48 14.29 85.71 1988 | 48 14.29 100.00 ------------+----------------------------------- Total | 336 100.00 . . local j 0 . forvalues i=82/87 { 2. local ++j 3. rename yr`j&#39; yr`i&#39; 4. quietly replace yr`i&#39; = yr`i&#39; - yr7 5. } . . drop yr7 . . xtreg fatal beertax spircons unrate perincK yr*, fe Fixed-effects (within) regression Number of obs = 336 Group variable: state Number of groups = 48 R-sq: Obs per group: within = 0.4528 min = 7 between = 0.1090 avg = 7.0 overall = 0.0770 max = 7 F(10,278) = 23.00 corr(u_i, Xb) = -0.8728 Prob &gt; F = 0.0000 ------------------------------------------------------------------------------ fatal | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- beertax | -.4347195 .1539564 -2.82 0.005 -.7377878 -.1316511 spircons | .805857 .1126425 7.15 0.000 .5841163 1.027598 unrate | -.0549084 .0103418 -5.31 0.000 -.0752666 -.0345502 perincK | .0882636 .0199988 4.41 0.000 .0488953 .1276319 yr82 | .1004321 .0355629 2.82 0.005 .0304253 .170439 yr83 | .0470609 .0321574 1.46 0.144 -.0162421 .1103638 yr84 | -.0645507 .0224667 -2.87 0.004 -.1087771 -.0203243 yr85 | -.0993055 .0198667 -5.00 0.000 -.1384139 -.0601971 yr86 | .0496288 .0232525 2.13 0.034 .0038554 .0954021 yr87 | .0003593 .0289315 0.01 0.990 -.0565933 .0573119 _cons | .0286246 .4183346 0.07 0.945 -.7948812 .8521305 -------------+---------------------------------------------------------------- sigma_u | 1.0987683 sigma_e | .14570531 rho | .98271904 (fraction of variance due to u_i) ------------------------------------------------------------------------------ F test that all u_i=0: F(47, 278) = 64.52 Prob &gt; F = 0.0000 . test yr82 yr83 yr84 yr85 yr86 yr87 ( 1) yr82 = 0 ( 2) yr83 = 0 ( 3) yr84 = 0 ( 4) yr85 = 0 ( 5) yr86 = 0 ( 6) yr87 = 0 F( 6, 278) = 8.48 Prob &gt; F = 0.0000 9.1.3 The Between Estimator . use traffic.. xtreg fatal beertax spircons unrate perincK, be Between regression (regression on group means) Number of obs = 336 Group variable: state Number of groups = 48 R-sq: Obs per group: within = 0.0479 min = 7 between = 0.4565 avg = 7.0 overall = 0.2583 max = 7 F(4,43) = 9.03 sd(u_i + avg(e_i.))= .4209489 Prob &gt; F = 0.0000 ------------------------------------------------------------------------------ fatal | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- beertax | .0740362 .1456333 0.51 0.614 -.2196614 .3677338 spircons | .2997517 .1128135 2.66 0.011 .0722417 .5272618 unrate | .0322333 .038005 0.85 0.401 -.0444111 .1088776 perincK | -.1841747 .0422241 -4.36 0.000 -.2693277 -.0990218 _cons | 3.796343 .7502025 5.06 0.000 2.283415 5.309271 ------------------------------------------------------------------------------ 9.1.4 One-Way Random Effects Models . use traffic.. xtreg fatal beertax spircons unrate perincK, re Random-effects GLS regression Number of obs = 336 Group variable: state Number of groups = 48 R-sq: Obs per group: within = 0.2263 min = 7 between = 0.0123 avg = 7.0 overall = 0.0042 max = 7 Wald chi2(4) = 49.90 corr(u_i, X) = 0 (assumed) Prob &gt; chi2 = 0.0000 ------------------------------------------------------------------------------ fatal | Coef. Std. Err. z P&gt;|z| [95% Conf. Interval] -------------+---------------------------------------------------------------- beertax | .0442768 .1204613 0.37 0.713 -.191823 .2803765 spircons | .3024711 .0642954 4.70 0.000 .1764546 .4284877 unrate | -.0491381 .0098197 -5.00 0.000 -.0683843 -.0298919 perincK | -.0110727 .0194746 -0.57 0.570 -.0492423 .0270968 _cons | 2.001973 .3811247 5.25 0.000 1.254983 2.748964 -------------+---------------------------------------------------------------- sigma_u | .41675665 sigma_e | .15678965 rho | .87601197 (fraction of variance due to u_i) ------------------------------------------------------------------------------ 9.1.5 Testing the appropriateness of Random Effects Model . use traffic.. quietly xtreg fatal beertax spircons unrate perincK, fe . estimates store fix . . quietly xtreg fatal beertax spircons unrate perincK, re . estimates store ran . . hausman fix ran ---- Coefficients ---- | (b) (B) (b-B) sqrt(diag(V_b-V_B)) | fix ran Difference S.E. -------------+---------------------------------------------------------------- beertax | -.4840728 .0442768 -.5283495 .1090815 spircons | .8169652 .3024711 .514494 .0462668 unrate | -.0290499 -.0491381 .0200882 . perincK | .1047103 -.0110727 .115783 .0067112 ------------------------------------------------------------------------------ b = consistent under Ho and Ha; obtained from xtreg B = inconsistent under Ha, efficient under Ho; obtained from xtreg Test: Ho: difference in coefficients not systematic chi2(4) = (b-B)&#39;[(V_b-V_B)^(-1)](b-B) = 130.93 Prob&gt;chi2 = 0.0000 (V_b-V_B is not positive definite) . 9.1.6 Prediction from One-Way Fixed Effects Model &amp; Random Effects Model 9.2 IV Models for Panel Data 9.3 Dynamic Panel Data Models . use traffic.. tsset panel variable: state (strongly balanced) time variable: year, 1982 to 1988 delta: 1 unit . xtabond2 fatal L.fatal spircons year, gmmstyle(beertax spircons unrate perinc &gt; K) ivstyle(year) twostep robust nolevelq command xtabond2 is unrecognized r(199); end of do-file r(199); 9.4 Seemingly Unrelated Regression Models 9.4.1 SUR with Identical Regressors 9.5 Moving-Window Regression Estimates "],
["models-of-discrete-limited-dependent-variables.html", "10 Models of Discrete &amp; Limited Dependent Variables 10.1 Binomial Logit &amp; Probit Models 10.2 Ordered Logit &amp; Probit Models 10.3 Truncated Regression &amp; Tobit Models 10.4 Incidental Truncation &amp; Sample Selection Models 10.5 Bivariate Probit &amp; Probit with Selection", " 10 Models of Discrete &amp; Limited Dependent Variables 10.1 Binomial Logit &amp; Probit Models 10.1.1 The Latent Variable Approach 10.1.2 Marginal Effects &amp; Predictions 10.1.2.1 Binomial Probit . use womenwk.. describe Contains data from womenwk.dta obs: 2,000 vars: 15 9 Nov 2004 20:23 size: 134,000 ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- c1 double %10.0g c2 double %10.0g u double %10.0g v double %10.0g county float %9.0g age int %8.0g education int %8.0g married byte %8.0g children int %8.0g select float %9.0g wagefull float %9.0g wage float %9.0g lw float %9.0g work float %9.0g lwf float %9.0g ------------------------------------------------------------------------------- Sorted by: . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- c1 | 2,000 -.0023069 .9880571 -3.500514 3.614182 c2 | 2,000 -.0077596 1.006025 -3.410111 3.423961 u | 2,000 -.0011535 .4940286 -1.750257 1.807091 v | 2,000 -.0071367 1 -3.954782 3.229851 county | 2,000 4.5 2.873 0 9 -------------+--------------------------------------------------------- age | 2,000 36.208 8.28656 20 59 education | 2,000 13.084 3.045912 10 20 married | 2,000 .6705 .4701492 0 1 children | 2,000 1.6445 1.398963 0 5 select | 2,000 35.78556 14.98163 -14.45688 89.63869 -------------+--------------------------------------------------------- wagefull | 2,000 21.31176 7.012038 -1.680425 45.80979 wage | 1,343 23.69217 6.305374 5.88497 45.80979 lw | 1,343 3.126703 .2865111 1.772402 3.824498 work | 2,000 .6715 .4697852 0 1 lwf | 2,000 2.099581 1.487519 0 3.824498 . . probit work age married children education, nolog Probit regression Number of obs = 2,000 LR chi2(4) = 478.32 Prob &gt; chi2 = 0.0000 Log likelihood = -1027.0616 Pseudo R2 = 0.1889 ------------------------------------------------------------------------------ work | Coef. Std. Err. z P&gt;|z| [95% Conf. Interval] -------------+---------------------------------------------------------------- age | .0347211 .0042293 8.21 0.000 .0264318 .0430105 married | .4308575 .074208 5.81 0.000 .2854125 .5763025 children | .4473249 .0287417 15.56 0.000 .3909922 .5036576 education | .0583645 .0109742 5.32 0.000 .0368555 .0798735 _cons | -2.467365 .1925635 -12.81 0.000 -2.844782 -2.089948 ------------------------------------------------------------------------------ . mfx compute Marginal effects after probit y = Pr(work) (predict) = .71835948 ------------------------------------------------------------------------------ variable | dy/dx Std. Err. z P&gt;|z| [ 95% C.I. ] X ---------+-------------------------------------------------------------------- age | .011721 .00142 8.25 0.000 .008935 .014507 36.208 married*| .150478 .02641 5.70 0.000 .098716 .20224 .6705 children | .1510059 .00922 16.38 0.000 .132939 .169073 1.6445 educat~n | .0197024 .0037 5.32 0.000 .012442 .026963 13.084 ------------------------------------------------------------------------------ (*) dy/dx is for discrete change of dummy variable from 0 to 1 . . margeff, dummies(married) count command margeff is unrecognized r(199); end of do-file r(199); 10.1.3 Evaluating Specification &amp; Goodness of Fit . use womenwk.. . logit work age married children education, nolog Logistic regression Number of obs = 2,000 LR chi2(4) = 476.62 Prob &gt; chi2 = 0.0000 Log likelihood = -1027.9144 Pseudo R2 = 0.1882 ------------------------------------------------------------------------------ work | Coef. Std. Err. z P&gt;|z| [95% Conf. Interval] -------------+---------------------------------------------------------------- age | .0579303 .007221 8.02 0.000 .0437773 .0720833 married | .7417775 .1264705 5.87 0.000 .4938998 .9896552 children | .7644882 .0515289 14.84 0.000 .6634935 .865483 education | .0982513 .0186522 5.27 0.000 .0616936 .134809 _cons | -4.159247 .3320401 -12.53 0.000 -4.810034 -3.508461 ------------------------------------------------------------------------------ . mfx compute Marginal effects after logit y = Pr(work) (predict) = .72678588 ------------------------------------------------------------------------------ variable | dy/dx Std. Err. z P&gt;|z| [ 95% C.I. ] X ---------+-------------------------------------------------------------------- age | .0115031 .00142 8.08 0.000 .008713 .014293 36.208 married*| .1545671 .02703 5.72 0.000 .101592 .207542 .6705 children | .151803 .00938 16.19 0.000 .133425 .170181 1.6445 educat~n | .0195096 .0037 5.27 0.000 .01226 .02676 13.084 ------------------------------------------------------------------------------ (*) dy/dx is for discrete change of dummy variable from 0 to 1 . mfx compute, at(children = 0) warning: no value assigned in at() for variables age married education; means used for age married education Marginal effects after logit y = Pr(work) (predict) = .43074191 ------------------------------------------------------------------------------ variable | dy/dx Std. Err. z P&gt;|z| [ 95% C.I. ] X ---------+-------------------------------------------------------------------- age | .0142047 .00178 7.97 0.000 .01071 .0177 36.208 married*| .1762562 .02825 6.24 0.000 .120897 .231616 .6705 children | .187455 .01115 16.82 0.000 .165609 .209301 0 educat~n | .0240915 .00458 5.26 0.000 .015115 .033068 13.084 ------------------------------------------------------------------------------ (*) dy/dx is for discrete change of dummy variable from 0 to 1 10.2 Ordered Logit &amp; Probit Models . use panel84extract.. describe Contains data from panel84extract.dta obs: 98 vars: 38 1 Dec 2004 23:14 size: 14,896 ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- s77 float %9.0g s78 float %9.0g s79 float %9.0g s80 float %9.0g s81 float %9.0g s82 float %9.0g s83 float %9.0g b77 float %9.0g b78 float %9.0g b79 float %9.0g b80 float %9.0g b81 float %9.0g b82 float %9.0g b83 float %9.0g is77 float %9.0g is78 float %9.0g is79 float %9.0g is80 float %9.0g is81 float %9.0g is82 float %9.0g is83 float %9.0g ia77 float %9.0g ia78 float %9.0g ia79 float %9.0g ia80 float %9.0g ia81 float %9.0g ia82 float %9.0g ia83 float %9.0g r77 float %9.0g r78 float %9.0g r79 float %9.0g r80 float %9.0g r81 float %9.0g r82 float %9.0g r83 float %9.0g rating83 float %9.0g rating83c float %9.0g bondrating Bond rating, 1983 dia float %9.0g ------------------------------------------------------------------------------- Sorted by: . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- s77 | 98 2399226 6835850 28188 5.50e+07 s78 | 98 2757617 7812873 48432 6.32e+07 s79 | 98 3084304 8191207 103004 6.63e+07 s80 | 98 3081560 7295521 114562 5.77e+07 s81 | 98 3328268 7815398 167239 6.27e+07 -------------+--------------------------------------------------------- s82 | 98 3126689 7479808 115376 6.00e+07 s83 | 98 3409835 9008834 108397 7.46e+07 b77 | 98 1.019388 .2675541 .29 2.27 b78 | 98 1.035 .2937677 .29 2.27 b79 | 98 1.008265 .2601666 .29 2.27 -------------+--------------------------------------------------------- b80 | 98 1.032245 .2380095 .29 2 b81 | 98 1.015612 .2452773 .29 2.08 b82 | 98 .9689796 .2139394 .29 1.65 b83 | 98 .9932653 .2011348 .46 1.65 is77 | 98 11.24923 5.615914 -16.54562 26.56383 -------------+--------------------------------------------------------- is78 | 98 11.65585 4.528279 .5114942 26.84296 is79 | 98 11.36975 4.527863 .045454 23.66122 is80 | 98 11.04448 9.335074 -4.169284 88.73264 is81 | 98 10.34562 4.951754 -2.06479 25.77528 is82 | 98 7.204422 6.152187 -12.69882 24.89959 -------------+--------------------------------------------------------- is83 | 98 7.846085 6.495875 -16.40544 26.55174 ia77 | 98 14.95777 6.958497 -18.13673 37.67006 ia78 | 98 15.53974 5.104227 1.188427 29.87578 ia79 | 98 15.48429 5.302939 .0836498 28.42293 ia80 | 98 13.8006 6.085422 -6.350523 29.75574 -------------+--------------------------------------------------------- ia81 | 98 13.82875 5.952011 -2.480706 30.5371 ia82 | 98 9.407202 7.306611 -12.54386 32.30307 ia83 | 98 10.11473 7.441946 -13.08016 30.74564 r77 | 98 2.34113 1.874804 0 6 r78 | 98 2.419951 1.911573 0 6 -------------+--------------------------------------------------------- r79 | 98 2.373979 1.912279 0 6 r80 | 98 2.315973 1.855837 0 6 r81 | 98 2.399914 1.841927 0 6 r82 | 98 2.342588 1.851536 0 6 r83 | 98 2.391481 1.850125 0 6 -------------+--------------------------------------------------------- rating83 | 98 2.336735 1.787378 0 6 rating83c | 98 3.479592 1.17736 2 5 dia | 98 .7075242 4.711211 -10.79014 20.05367 . tabulate rating83c Bond | rating, | 1983 | Freq. Percent Cum. ------------+----------------------------------- BA_B_C | 26 26.53 26.53 BAA | 28 28.57 55.10 AA_A | 15 15.31 70.41 AAA | 29 29.59 100.00 ------------+----------------------------------- Total | 98 100.00 . . ologit rating83c ia83 dia, nolog Ordered logistic regression Number of obs = 98 LR chi2(2) = 11.54 Prob &gt; chi2 = 0.0031 Log likelihood = -127.27146 Pseudo R2 = 0.0434 ------------------------------------------------------------------------------ rating83c | Coef. Std. Err. z P&gt;|z| [95% Conf. Interval] -------------+---------------------------------------------------------------- ia83 | .0939166 .0296196 3.17 0.002 .0358633 .1519699 dia | -.0866925 .0449789 -1.93 0.054 -.1748496 .0014646 -------------+---------------------------------------------------------------- /cut1 | -.1853053 .3571432 -.8852932 .5146826 /cut2 | 1.185726 .3882099 .4248488 1.946604 /cut3 | 1.908412 .4164896 1.092108 2.724717 ------------------------------------------------------------------------------ . . predict spBA_B_C spBAA spAA_A spAAA (option pr assumed; predicted probabilities) . summarize spAAA, mean . list sp* rating83c if spAAA == r(max) +------------------------------------------------------+ | spBA_B_C spBAA spAA_A spAAA rati~83c | |------------------------------------------------------| 31. | .0388714 .0985567 .1096733 .7528986 AAA | +------------------------------------------------------+ . . summarize spBA_B_C, mean . list sp* rating83c if spBA_B_C == r(max) +------------------------------------------------------+ | spBA_B_C spBAA spAA_A spAAA rati~83c | |------------------------------------------------------| 67. | .7158453 .1926148 .0449056 .0466343 AAA | +------------------------------------------------------+ 10.3 Truncated Regression &amp; Tobit Models 10.3.1 Truncation . use laborsub.. describe Contains data from laborsub.dta obs: 250 vars: 6 25 Sep 2004 18:36 size: 1,750 ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- lfp byte %9.0g 1 if woman worked in 1975 whrs int %9.0g Wife&#39;s hours of work kl6 byte %9.0g # of children younger than 6 k618 byte %9.0g # of children between 6 and 18 wa byte %9.0g Wife&#39;s age we byte %9.0g Wife&#39;s educational attainment ------------------------------------------------------------------------------- Sorted by: . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- lfp | 250 .6 .4908807 0 1 whrs | 250 799.84 915.6035 0 4950 kl6 | 250 .236 .5112234 0 3 k618 | 250 1.364 1.370774 0 8 wa | 250 42.92 8.426483 30 60 -------------+--------------------------------------------------------- we | 250 12.352 2.164912 5 17 . . regress whrs kl6 k618 wa we if whrs &gt; 0 Source | SS df MS Number of obs = 150 -------------+---------------------------------- F(4, 145) = 2.80 Model | 7326995.15 4 1831748.79 Prob &gt; F = 0.0281 Residual | 94793104.2 145 653745.546 R-squared = 0.0717 -------------+---------------------------------- Adj R-squared = 0.0461 Total | 102120099 149 685369.794 Root MSE = 808.55 ------------------------------------------------------------------------------ whrs | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- kl6 | -421.4822 167.9734 -2.51 0.013 -753.4748 -89.48953 k618 | -104.4571 54.18616 -1.93 0.056 -211.5538 2.639668 wa | -4.784917 9.690502 -0.49 0.622 -23.9378 14.36797 we | 9.353195 31.23793 0.30 0.765 -52.38731 71.0937 _cons | 1629.817 615.1301 2.65 0.009 414.0371 2845.597 ------------------------------------------------------------------------------ . . truncreg whrs kl6 k618 wa we, ll(0) nolog (note: 100 obs. truncated) Truncated regression Limit: lower = 0 Number of obs = 150 upper = +inf Wald chi2(4) = 10.05 Log likelihood = -1200.9157 Prob &gt; chi2 = 0.0395 ------------------------------------------------------------------------------ whrs | Coef. Std. Err. z P&gt;|z| [95% Conf. Interval] -------------+---------------------------------------------------------------- kl6 | -803.0042 321.3614 -2.50 0.012 -1432.861 -173.1474 k618 | -172.875 88.72898 -1.95 0.051 -346.7806 1.030579 wa | -8.821123 14.36848 -0.61 0.539 -36.98283 19.34059 we | 16.52873 46.50375 0.36 0.722 -74.61695 107.6744 _cons | 1586.26 912.355 1.74 0.082 -201.9233 3374.442 -------------+---------------------------------------------------------------- /sigma | 983.7262 94.44303 10.42 0.000 798.6213 1168.831 ------------------------------------------------------------------------------ 10.3.2 Censoring . use womenwk.. describe Contains data from womenwk.dta obs: 2,000 vars: 15 9 Nov 2004 20:23 size: 134,000 ------------------------------------------------------------------------------- storage display value variable name type format label variable label ------------------------------------------------------------------------------- c1 double %10.0g c2 double %10.0g u double %10.0g v double %10.0g county float %9.0g age int %8.0g education int %8.0g married byte %8.0g children int %8.0g select float %9.0g wagefull float %9.0g wage float %9.0g lw float %9.0g work float %9.0g lwf float %9.0g ------------------------------------------------------------------------------- Sorted by: . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- c1 | 2,000 -.0023069 .9880571 -3.500514 3.614182 c2 | 2,000 -.0077596 1.006025 -3.410111 3.423961 u | 2,000 -.0011535 .4940286 -1.750257 1.807091 v | 2,000 -.0071367 1 -3.954782 3.229851 county | 2,000 4.5 2.873 0 9 -------------+--------------------------------------------------------- age | 2,000 36.208 8.28656 20 59 education | 2,000 13.084 3.045912 10 20 married | 2,000 .6705 .4701492 0 1 children | 2,000 1.6445 1.398963 0 5 select | 2,000 35.78556 14.98163 -14.45688 89.63869 -------------+--------------------------------------------------------- wagefull | 2,000 21.31176 7.012038 -1.680425 45.80979 wage | 1,343 23.69217 6.305374 5.88497 45.80979 lw | 1,343 3.126703 .2865111 1.772402 3.824498 work | 2,000 .6715 .4697852 0 1 lwf | 2,000 2.099581 1.487519 0 3.824498 . . regress lwf age married children education Source | SS df MS Number of obs = 2,000 -------------+---------------------------------- F(4, 1995) = 134.21 Model | 937.873188 4 234.468297 Prob &gt; F = 0.0000 Residual | 3485.34135 1,995 1.74703827 R-squared = 0.2120 -------------+---------------------------------- Adj R-squared = 0.2105 Total | 4423.21454 1,999 2.21271363 Root MSE = 1.3218 ------------------------------------------------------------------------------ lwf | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- age | .0363624 .003862 9.42 0.000 .0287885 .0439362 married | .3188214 .0690834 4.62 0.000 .1833381 .4543046 children | .3305009 .0213143 15.51 0.000 .2887004 .3723015 education | .0843345 .0102295 8.24 0.000 .0642729 .1043961 _cons | -1.077738 .1703218 -6.33 0.000 -1.411765 -.7437105 ------------------------------------------------------------------------------ . . tobit lwf age married children education, ll(0) Refining starting values: Grid node 0: log likelihood = -3563.7251 Fitting full model: Iteration 0: log likelihood = -3563.7251 Iteration 1: log likelihood = -3368.4259 Iteration 2: log likelihood = -3350.1512 Iteration 3: log likelihood = -3349.9689 Iteration 4: log likelihood = -3349.9685 Iteration 5: log likelihood = -3349.9685 Tobit regression Number of obs = 2,000 Uncensored = 1,343 Limits: lower = 0 Left-censored = 657 upper = +inf Right-censored = 0 LR chi2(4) = 461.85 Prob &gt; chi2 = 0.0000 Log likelihood = -3349.9685 Pseudo R2 = 0.0645 ------------------------------------------------------------------------------ lwf | Coef. Std. Err. t P&gt;|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- age | .052157 .0057457 9.08 0.000 .0408888 .0634252 married | .4841801 .1035191 4.68 0.000 .2811633 .687197 children | .4860021 .0317055 15.33 0.000 .4238228 .5481814 education | .1149492 .0150913 7.62 0.000 .0853528 .1445455 _cons | -2.807696 .2632573 -10.67 0.000 -3.323984 -2.291408 -------------+---------------------------------------------------------------- var(e.lwf)| 3.507421 .1498785 3.225466 3.814024 ------------------------------------------------------------------------------ . mfx compute, predict(pr(0,.)) Marginal effects after tobit y = Pr(lwf&gt;0) (predict, pr(0,.)) = .81920975 ------------------------------------------------------------------------------ variable | dy/dx Std. Err. z P&gt;|z| [ 95% C.I. ] X ---------+-------------------------------------------------------------------- age | .0073278 .00083 8.84 0.000 .005703 .008952 36.208 married*| .0706994 .01576 4.48 0.000 .039803 .101596 .6705 children | .0682813 .00479 14.26 0.000 .058899 .077663 1.6445 educat~n | .0161499 .00216 7.48 0.000 .011918 .020382 13.084 ------------------------------------------------------------------------------ (*) dy/dx is for discrete change of dummy variable from 0 to 1 . mfx compute, predict(e(0,.)) Marginal effects after tobit y = E(lwf|lwf&gt;0) (predict, e(0,.)) = 2.3102021 ------------------------------------------------------------------------------ variable | dy/dx Std. Err. z P&gt;|z| [ 95% C.I. ] X ---------+-------------------------------------------------------------------- age | .0314922 .00347 9.08 0.000 .024695 .03829 36.208 married*| .2861047 .05982 4.78 0.000 .168855 .403355 .6705 children | .2934463 .01908 15.38 0.000 .256041 .330852 1.6445 educat~n | .0694059 .00912 7.61 0.000 .051531 .087281 13.084 ------------------------------------------------------------------------------ (*) dy/dx is for discrete change of dummy variable from 0 to 1 10.4 Incidental Truncation &amp; Sample Selection Models . use womenwk.. . heckman lw education age children, select(age married children education) no &gt; log Heckman selection model Number of obs = 2,000 (regression model with sample selection) Selected = 1,343 Nonselected = 657 Wald chi2(3) = 454.78 Log likelihood = -1052.857 Prob &gt; chi2 = 0.0000 ------------------------------------------------------------------------------ lw | Coef. Std. Err. z P&gt;|z| [95% Conf. Interval] -------------+---------------------------------------------------------------- lw | education | .0397189 .0024525 16.20 0.000 .0349121 .0445256 age | .0075872 .0009748 7.78 0.000 .0056767 .0094977 children | -.0180477 .0064544 -2.80 0.005 -.0306981 -.0053973 _cons | 2.305499 .0653024 35.30 0.000 2.177509 2.43349 -------------+---------------------------------------------------------------- select | age | .0350233 .0042344 8.27 0.000 .0267241 .0433225 married | .4547724 .0735876 6.18 0.000 .3105434 .5990014 children | .4538372 .0288398 15.74 0.000 .3973122 .5103621 education | .0565136 .0110025 5.14 0.000 .0349492 .0780781 _cons | -2.478055 .1927823 -12.85 0.000 -2.855901 -2.100208 -------------+---------------------------------------------------------------- /athrho | .3377674 .1152251 2.93 0.003 .1119304 .5636045 /lnsigma | -1.375543 .0246873 -55.72 0.000 -1.423929 -1.327156 -------------+---------------------------------------------------------------- rho | .3254828 .1030183 .1114653 .5106469 sigma | .2527024 .0062385 .2407662 .2652304 lambda | .0822503 .0273475 .0286501 .1358505 ------------------------------------------------------------------------------ LR test of indep. eqns. (rho = 0): chi2(1) = 5.53 Prob &gt; chi2 = 0.0187 . . heckman lw education age children, select(age married children education) tw &gt; ostep Heckman selection model -- two-step estimates Number of obs = 2,000 (regression model with sample selection) Selected = 1,343 Nonselected = 657 Wald chi2(3) = 405.68 Prob &gt; chi2 = 0.0000 ------------------------------------------------------------------------------ lw | Coef. Std. Err. z P&gt;|z| [95% Conf. Interval] -------------+---------------------------------------------------------------- lw | education | .0427067 .003106 13.75 0.000 .0366191 .0487944 age | .009322 .0014343 6.50 0.000 .0065108 .0121333 children | -.0019549 .0115202 -0.17 0.865 -.0245341 .0206242 _cons | 2.124787 .1249789 17.00 0.000 1.879833 2.369741 -------------+---------------------------------------------------------------- select | age | .0347211 .0042293 8.21 0.000 .0264318 .0430105 married | .4308575 .074208 5.81 0.000 .2854125 .5763025 children | .4473249 .0287417 15.56 0.000 .3909922 .5036576 education | .0583645 .0109742 5.32 0.000 .0368555 .0798735 _cons | -2.467365 .1925635 -12.81 0.000 -2.844782 -2.089948 -------------+---------------------------------------------------------------- /mills | lambda | .1822815 .0638285 2.86 0.004 .05718 .307383 -------------+---------------------------------------------------------------- rho | 0.66698 sigma | .27329216 ------------------------------------------------------------------------------ 10.5 Bivariate Probit &amp; Probit with Selection . use hmda.. . replace fanfred = . if deny (285 real changes made, 285 to missing) . rename s6 loanamt . rename vr vacancy . rename mi med_income . rename s50 appr_value . rename s17 appl_income . replace appl_income = appl_income/1000 (2,379 real changes made) . rename s46 debt_inc_r . . summarize Variable | Obs Mean Std. Dev. Min Max -------------+--------------------------------------------------------- seq | 2,380 2328.934 1293.337 2 4509 s3 | 2,380 1 0 1 1 s4 | 2,380 1 0 1 1 s5 | 2,380 1.036555 .2027758 1 3 loanamt | 2,380 139.1353 83.42097 2 980 -------------+--------------------------------------------------------- s7 | 2,380 1.268908 .6605115 1 3 s9 | 2,380 1120 0 1120 1120 s11 | 2,380 .1743697 .3795069 0 1 s13 | 2,380 4.715126 .6991424 3 5 s14 | 2,379 5.702816 1.580592 1 8 -------------+--------------------------------------------------------- s15 | 2,380 1.223109 .4342082 1 3 s16 | 2,379 2.513241 .9831064 1 8 appl_income | 2,380 13.9406 116.9485 0 999.9994 s18 | 2,265 1.954967 3.044967 0 9 s19a | 0 -------------+--------------------------------------------------------- s19b | 0 s19c | 0 s19d | 0 s20 | 2,380 1261.521 35488.59 1 999999.4 s23a | 0 -------------+--------------------------------------------------------- s24a | 2,380 .7605042 1.104747 0 8 s25a | 2,380 19758.32 139160.4 0 999999.4 s26a | 2,380 22275.29 147586.7 0 999999.4 s27a | 2,380 .1163866 .3207553 0 1 s30a | 2,380 4332.712 4663.801 0 81000 -------------+--------------------------------------------------------- s30c | 2,380 1360.359 2130.56 0 41667 s31a | 2,380 4914.016 5162.458 0 81000 s31c | 2,380 1471.81 2358.868 0 41667 s32 | 2,380 1457.293 854.9721 0 10798 s33 | 2,380 1870.239 40962.55 0 999999.4 -------------+--------------------------------------------------------- s34 | 2,380 4.507271 87.8796 0 3908 s35 | 2,380 5134.612 70836.87 0 999999.4 s39 | 2,380 3782.993 61390.39 0 999999.4 s40 | 2,380 1.75 23.60479 0 666 s41 | 2,380 433.6915 20497.71 0 999999.4 -------------+--------------------------------------------------------- s42 | 2,380 1.721008 .5372816 1 4 s43 | 2,380 2.116387 1.666721 1 6 s44 | 2,380 .0735294 .2610584 0 1 s45 | 2,380 25.53461 9.665561 0 300 debt_inc_r | 2,380 33.08136 10.72573 0 300 -------------+--------------------------------------------------------- s47 | 2,380 1.670588 .4736616 1 3 s48 | 2,380 2022.587 40956.14 6 999999.4 s49 | 0 appr_value | 2,380 198.5426 152.9863 25 4316 s51 | 2,380 1.711765 .4530364 1 2 -------------+--------------------------------------------------------- s52 | 2,380 .2256303 .4180845 0 1 s53 | 2,380 .0201681 .1406045 0 1 s54 | 0 s55 | 2,380 .0294118 .1689932 0 1 s56 | 2,380 .047479 .2127058 0 1 -------------+--------------------------------------------------------- s57 | 2,380 102102.5 302843.7 0 999999.4 netw | 2,380 253.0412 1072.576 -7919 28023 uria | 2,380 3.774496 2.027062 1.8 10.6 rtdum | 2,380 .0726891 .25968 0 1 bd | 2,380 .444958 .4970656 0 1 -------------+--------------------------------------------------------- med_income | 2,380 .8294118 .3762278 0 1 old | 2,380 .4630252 .5054334 0 2 vacancy | 2,380 .4365546 .4960626 0 1 school | 2,380 9679.206 97847.79 5 999999.4 chval | 2,380 6993.166 81710.9 -8.333333 999999.4 -------------+--------------------------------------------------------- dnotown | 2,380 .0336134 .1802699 0 1 dprop | 2,380 0 0 0 0 deny | 2,380 .1197479 .3247347 0 1 fanfred | 2,095 .3331742 .4714608 0 1 approve | 2,380 .8802521 .3247347 0 1 -------------+--------------------------------------------------------- black | 2,380 .142437 .3495712 0 1 . . heckprob fanfred loanamt vacancy med_income appr_value, select(approve = blac &gt; k appl_income debt_inc_r) nolog Probit model with sample selection Number of obs = 2,380 Selected = 2,095 Nonselected = 285 Wald chi2(4) = 80.69 Log likelihood = -2063.066 Prob &gt; chi2 = 0.0000 ------------------------------------------------------------------------------ | Coef. Std. Err. z P&gt;|z| [95% Conf. Interval] -------------+---------------------------------------------------------------- fanfred | loanamt | -.0026434 .0008029 -3.29 0.001 -.0042169 -.0010698 vacancy | -.2163307 .0609798 -3.55 0.000 -.3358489 -.0968125 med_income | .2671341 .0893349 2.99 0.003 .0920409 .4422273 appr_value | -.0014358 .0005099 -2.82 0.005 -.0024351 -.0004364 _cons | .1684824 .1182055 1.43 0.154 -.0631961 .4001608 -------------+---------------------------------------------------------------- approve | black | -.7343534 .081858 -8.97 0.000 -.8947921 -.5739148 appl_income | -.0006596 .000236 -2.80 0.005 -.0011221 -.0001971 debt_inc_r | -.0262367 .0036441 -7.20 0.000 -.0333791 -.0190944 _cons | 2.236424 .1319308 16.95 0.000 1.977845 2.495004 -------------+---------------------------------------------------------------- /athrho | -.6006599 .2712535 -2.21 0.027 -1.132307 -.0690128 -------------+---------------------------------------------------------------- rho | -.537519 .1928812 -.8118074 -.0689034 ------------------------------------------------------------------------------ LR test of indep. eqns. (rho = 0): chi2(1) = 4.99 Prob &gt; chi2 = 0.0255 10.5.1 Binomial Probit with Selection "]
]
